{
  "{\"sourceRoot\":\"/var/www/corona/api\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/var/www/corona/api\",\"filename\":\"/var/www/corona/api/server.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/var/www/corona/api\",\"plugins\":[{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.8.7": {
    "metadata": {},
    "options": {
      "sourceRoot": "/var/www/corona/api",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/var/www/corona/api",
      "filename": "/var/www/corona/api/server.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/var/www/corona/api",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-nullish-coalescing-operator",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "LogicalExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/var/www/corona/api/server.js",
        "plugins": [
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/var/www/corona/api/server.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/var/www/corona/api",
        "sourceFileName": "server.js"
      }
    },
    "ast": null,
    "code": "\"use strict\"; // Dependancies\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _http = _interopRequireDefault(require(\"http\"));\n\nvar _https = _interopRequireDefault(require(\"https\"));\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\n\nvar _routes = _interopRequireDefault(require(\"./routes.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst dotenv = require('dotenv').config(); // ENV\n\n\nconst port = process.env.PORT || 8080;\nconst host = process.env.HOST || \"localhost\";\nconst env = process.env.ENV || \"development\"; // Components \n\n// Primary https express\nconst express = (0, _express.default)();\n\nconst router = _express.default.Router();\n\nvar whitelist = ['http://latvijaskoronakarte.online', 'http://www.latvijaskoronakarte.online', 'http://latvijaskoronakarte.lv', 'http://www.latvijaskoronakarte.lv', \"http://localhost:3000\"];\nvar corsOptions = {\n  origin: (origin, callback) => {\n    if (whitelist.indexOf(origin) !== -1 || !origin) {\n      callback(null, true);\n    } else {\n      callback(new Error('Not allowed by Corona CORS'));\n    }\n  }\n};\nexpress.set(\"env\", env);\nexpress.set(\"port\", port);\nexpress.use((0, _cors.default)(corsOptions));\nexpress.use(\"/\", router);\n(0, _routes.default)(express);\n\nif (env == \"production\") {\n  const certOpts = {\n    key: \"../certificates/key.pem\",\n    cert: \"../certificates/cert.pem\"\n  };\n\n  const server = _https.default.createServer(certOpts, express);\n\n  server.listen(port, () => {\n    console.log(\"express server listening to port \" + port);\n  }); // Secondary http express\n\n  const httpexpress = express();\n  const httpRouter = express.Router();\n  httpexpress.use(\"*\", httpRouter);\n  httpRouter.get(\"*\", (req, res) => {\n    const host = req.get(\"Host\"); // replace the port in the host\n\n    host = host.replace(/:\\d+$/, \":\" + express.get(\"port\")); // determine the redirect destination\n\n    const destination = [\"https://\", host, req.url].join(\"\");\n    return res.redirect(destination);\n  });\n\n  const httpServer = _http.default.createServer(httpexpress);\n\n  httpServer.listen(80);\n} else {\n  const server = _http.default.createServer(express);\n\n  server.listen(port, () => {\n    console.log(\"express server listening to port \", host + \":\" + port);\n  });\n}\n\nmodule.exports = express;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJuYW1lcyI6WyJkb3RlbnYiLCJyZXF1aXJlIiwiY29uZmlnIiwicG9ydCIsInByb2Nlc3MiLCJlbnYiLCJQT1JUIiwiaG9zdCIsIkhPU1QiLCJFTlYiLCJleHByZXNzIiwicm91dGVyIiwiRXhwcmVzcyIsIlJvdXRlciIsIndoaXRlbGlzdCIsImNvcnNPcHRpb25zIiwib3JpZ2luIiwiY2FsbGJhY2siLCJpbmRleE9mIiwiRXJyb3IiLCJzZXQiLCJ1c2UiLCJjZXJ0T3B0cyIsImtleSIsImNlcnQiLCJzZXJ2ZXIiLCJodHRwcyIsImNyZWF0ZVNlcnZlciIsImxpc3RlbiIsImNvbnNvbGUiLCJsb2ciLCJodHRwZXhwcmVzcyIsImh0dHBSb3V0ZXIiLCJnZXQiLCJyZXEiLCJyZXMiLCJyZXBsYWNlIiwiZGVzdGluYXRpb24iLCJ1cmwiLCJqb2luIiwicmVkaXJlY3QiLCJodHRwU2VydmVyIiwiaHR0cCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLGEsQ0FDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFZQTs7OztBQVhBLE1BQU1BLE1BQU0sR0FBR0MsT0FBTyxDQUFDLFFBQUQsQ0FBUCxDQUFrQkMsTUFBbEIsRUFBZixDLENBSUE7OztBQUNBLE1BQU1DLElBQUksR0FBR0MsT0FBTyxDQUFDQyxHQUFSLENBQVlDLElBQVosSUFBb0IsSUFBakM7QUFDQSxNQUFNQyxJQUFJLEdBQUdILE9BQU8sQ0FBQ0MsR0FBUixDQUFZRyxJQUFaLElBQW9CLFdBQWpDO0FBQ0EsTUFBTUgsR0FBRyxHQUFHRCxPQUFPLENBQUNDLEdBQVIsQ0FBWUksR0FBWixJQUFtQixhQUEvQixDLENBR0E7O0FBSUE7QUFDQSxNQUFNQyxPQUFPLEdBQUcsdUJBQWhCOztBQUNBLE1BQU1DLE1BQU0sR0FBR0MsaUJBQVFDLE1BQVIsRUFBZjs7QUFHQSxJQUFJQyxTQUFTLEdBQUcsQ0FDWixtQ0FEWSxFQUVaLHVDQUZZLEVBR1osK0JBSFksRUFJWixtQ0FKWSxFQUtaLHVCQUxZLENBQWhCO0FBT0EsSUFBSUMsV0FBVyxHQUFHO0FBQ2RDLEVBQUFBLE1BQU0sRUFBRSxDQUFDQSxNQUFELEVBQVNDLFFBQVQsS0FBc0I7QUFDMUIsUUFBSUgsU0FBUyxDQUFDSSxPQUFWLENBQWtCRixNQUFsQixNQUE4QixDQUFDLENBQS9CLElBQW9DLENBQUNBLE1BQXpDLEVBQWlEO0FBQzdDQyxNQUFBQSxRQUFRLENBQUMsSUFBRCxFQUFPLElBQVAsQ0FBUjtBQUNILEtBRkQsTUFFTztBQUNIQSxNQUFBQSxRQUFRLENBQUMsSUFBSUUsS0FBSixDQUFVLDRCQUFWLENBQUQsQ0FBUjtBQUNIO0FBQ0o7QUFQYSxDQUFsQjtBQVdBVCxPQUFPLENBQUNVLEdBQVIsQ0FBWSxLQUFaLEVBQW1CZixHQUFuQjtBQUNBSyxPQUFPLENBQUNVLEdBQVIsQ0FBWSxNQUFaLEVBQW9CakIsSUFBcEI7QUFDQU8sT0FBTyxDQUFDVyxHQUFSLENBQVksbUJBQUtOLFdBQUwsQ0FBWjtBQUNBTCxPQUFPLENBQUNXLEdBQVIsQ0FBWSxHQUFaLEVBQWlCVixNQUFqQjtBQUNBLHFCQUFPRCxPQUFQOztBQU1BLElBQUlMLEdBQUcsSUFBSSxZQUFYLEVBQXlCO0FBS3JCLFFBQU1pQixRQUFRLEdBQUc7QUFDYkMsSUFBQUEsR0FBRyxFQUFFLHlCQURRO0FBRWJDLElBQUFBLElBQUksRUFBRTtBQUZPLEdBQWpCOztBQUtBLFFBQU1DLE1BQU0sR0FBR0MsZUFBTUMsWUFBTixDQUFtQkwsUUFBbkIsRUFBNkJaLE9BQTdCLENBQWY7O0FBQ0FlLEVBQUFBLE1BQU0sQ0FBQ0csTUFBUCxDQUFjekIsSUFBZCxFQUFvQixNQUFNO0FBQ3RCMEIsSUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksc0NBQXNDM0IsSUFBbEQ7QUFDSCxHQUZELEVBWHFCLENBZXJCOztBQUNBLFFBQU00QixXQUFXLEdBQUdyQixPQUFPLEVBQTNCO0FBQ0EsUUFBTXNCLFVBQVUsR0FBR3RCLE9BQU8sQ0FBQ0csTUFBUixFQUFuQjtBQUNBa0IsRUFBQUEsV0FBVyxDQUFDVixHQUFaLENBQWdCLEdBQWhCLEVBQXFCVyxVQUFyQjtBQUNBQSxFQUFBQSxVQUFVLENBQUNDLEdBQVgsQ0FBZSxHQUFmLEVBQW9CLENBQUNDLEdBQUQsRUFBTUMsR0FBTixLQUFjO0FBQzlCLFVBQU01QixJQUFJLEdBQUcyQixHQUFHLENBQUNELEdBQUosQ0FBUSxNQUFSLENBQWIsQ0FEOEIsQ0FFMUI7O0FBQ0oxQixJQUFBQSxJQUFJLEdBQUdBLElBQUksQ0FBQzZCLE9BQUwsQ0FBYSxPQUFiLEVBQXNCLE1BQU0xQixPQUFPLENBQUN1QixHQUFSLENBQVksTUFBWixDQUE1QixDQUFQLENBSDhCLENBSTFCOztBQUNKLFVBQU1JLFdBQVcsR0FBRyxDQUFDLFVBQUQsRUFBYTlCLElBQWIsRUFBbUIyQixHQUFHLENBQUNJLEdBQXZCLEVBQTRCQyxJQUE1QixDQUFpQyxFQUFqQyxDQUFwQjtBQUNBLFdBQU9KLEdBQUcsQ0FBQ0ssUUFBSixDQUFhSCxXQUFiLENBQVA7QUFDSCxHQVBEOztBQVFBLFFBQU1JLFVBQVUsR0FBR0MsY0FBS2YsWUFBTCxDQUFrQkksV0FBbEIsQ0FBbkI7O0FBQ0FVLEVBQUFBLFVBQVUsQ0FBQ2IsTUFBWCxDQUFrQixFQUFsQjtBQUtILENBakNELE1BaUNPO0FBS0gsUUFBTUgsTUFBTSxHQUFHaUIsY0FBS2YsWUFBTCxDQUFrQmpCLE9BQWxCLENBQWY7O0FBQ0FlLEVBQUFBLE1BQU0sQ0FBQ0csTUFBUCxDQUFjekIsSUFBZCxFQUFvQixNQUFNO0FBQ3RCMEIsSUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksbUNBQVosRUFBaUR2QixJQUFJLEdBQUcsR0FBUCxHQUFhSixJQUE5RDtBQUNILEdBRkQ7QUFPSDs7QUFHRHdDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQmxDLE9BQWpCIiwic291cmNlUm9vdCI6Ii92YXIvd3d3L2Nvcm9uYS9hcGkiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIlxuLy8gRGVwZW5kYW5jaWVzXG5pbXBvcnQgRXhwcmVzcyBmcm9tIFwiZXhwcmVzc1wiXG5pbXBvcnQgaHR0cCBmcm9tIFwiaHR0cFwiXG5pbXBvcnQgaHR0cHMgZnJvbSBcImh0dHBzXCJcbmltcG9ydCBjb3JzIGZyb20gXCJjb3JzXCJcbmNvbnN0IGRvdGVudiA9IHJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZygpO1xuXG5cblxuLy8gRU5WXG5jb25zdCBwb3J0ID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCA4MDgwXG5jb25zdCBob3N0ID0gcHJvY2Vzcy5lbnYuSE9TVCB8fCBcImxvY2FsaG9zdFwiXG5jb25zdCBlbnYgPSBwcm9jZXNzLmVudi5FTlYgfHwgXCJkZXZlbG9wbWVudFwiXG5cblxuLy8gQ29tcG9uZW50cyBcbmltcG9ydCByb3V0ZXMgZnJvbSBcIi4vcm91dGVzLmpzXCJcblxuXG4vLyBQcmltYXJ5IGh0dHBzIGV4cHJlc3NcbmNvbnN0IGV4cHJlc3MgPSBFeHByZXNzKClcbmNvbnN0IHJvdXRlciA9IEV4cHJlc3MuUm91dGVyKClcblxuXG52YXIgd2hpdGVsaXN0ID0gW1xuICAgICdodHRwOi8vbGF0dmlqYXNrb3JvbmFrYXJ0ZS5vbmxpbmUnLFxuICAgICdodHRwOi8vd3d3LmxhdHZpamFza29yb25ha2FydGUub25saW5lJyxcbiAgICAnaHR0cDovL2xhdHZpamFza29yb25ha2FydGUubHYnLFxuICAgICdodHRwOi8vd3d3LmxhdHZpamFza29yb25ha2FydGUubHYnLFxuICAgIFwiaHR0cDovL2xvY2FsaG9zdDozMDAwXCJcbl1cbnZhciBjb3JzT3B0aW9ucyA9IHtcbiAgICBvcmlnaW46IChvcmlnaW4sIGNhbGxiYWNrKSA9PiB7XG4gICAgICAgIGlmICh3aGl0ZWxpc3QuaW5kZXhPZihvcmlnaW4pICE9PSAtMSB8fCAhb3JpZ2luKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCB0cnVlKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCdOb3QgYWxsb3dlZCBieSBDb3JvbmEgQ09SUycpKVxuICAgICAgICB9XG4gICAgfVxufVxuXG5cbmV4cHJlc3Muc2V0KFwiZW52XCIsIGVudilcbmV4cHJlc3Muc2V0KFwicG9ydFwiLCBwb3J0KVxuZXhwcmVzcy51c2UoY29ycyhjb3JzT3B0aW9ucykpXG5leHByZXNzLnVzZShcIi9cIiwgcm91dGVyKVxucm91dGVzKGV4cHJlc3MpXG5cblxuXG5cblxuaWYgKGVudiA9PSBcInByb2R1Y3Rpb25cIikge1xuXG5cblxuXG4gICAgY29uc3QgY2VydE9wdHMgPSB7XG4gICAgICAgIGtleTogXCIuLi9jZXJ0aWZpY2F0ZXMva2V5LnBlbVwiLFxuICAgICAgICBjZXJ0OiBcIi4uL2NlcnRpZmljYXRlcy9jZXJ0LnBlbVwiXG4gICAgfVxuXG4gICAgY29uc3Qgc2VydmVyID0gaHR0cHMuY3JlYXRlU2VydmVyKGNlcnRPcHRzLCBleHByZXNzKVxuICAgIHNlcnZlci5saXN0ZW4ocG9ydCwgKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhcImV4cHJlc3Mgc2VydmVyIGxpc3RlbmluZyB0byBwb3J0IFwiICsgcG9ydClcbiAgICB9KVxuXG4gICAgLy8gU2Vjb25kYXJ5IGh0dHAgZXhwcmVzc1xuICAgIGNvbnN0IGh0dHBleHByZXNzID0gZXhwcmVzcygpXG4gICAgY29uc3QgaHR0cFJvdXRlciA9IGV4cHJlc3MuUm91dGVyKClcbiAgICBodHRwZXhwcmVzcy51c2UoXCIqXCIsIGh0dHBSb3V0ZXIpXG4gICAgaHR0cFJvdXRlci5nZXQoXCIqXCIsIChyZXEsIHJlcykgPT4ge1xuICAgICAgICBjb25zdCBob3N0ID0gcmVxLmdldChcIkhvc3RcIilcbiAgICAgICAgICAgIC8vIHJlcGxhY2UgdGhlIHBvcnQgaW4gdGhlIGhvc3RcbiAgICAgICAgaG9zdCA9IGhvc3QucmVwbGFjZSgvOlxcZCskLywgXCI6XCIgKyBleHByZXNzLmdldChcInBvcnRcIikpXG4gICAgICAgICAgICAvLyBkZXRlcm1pbmUgdGhlIHJlZGlyZWN0IGRlc3RpbmF0aW9uXG4gICAgICAgIGNvbnN0IGRlc3RpbmF0aW9uID0gW1wiaHR0cHM6Ly9cIiwgaG9zdCwgcmVxLnVybF0uam9pbihcIlwiKVxuICAgICAgICByZXR1cm4gcmVzLnJlZGlyZWN0KGRlc3RpbmF0aW9uKVxuICAgIH0pXG4gICAgY29uc3QgaHR0cFNlcnZlciA9IGh0dHAuY3JlYXRlU2VydmVyKGh0dHBleHByZXNzKVxuICAgIGh0dHBTZXJ2ZXIubGlzdGVuKDgwKVxuXG5cblxuXG59IGVsc2Uge1xuXG5cblxuXG4gICAgY29uc3Qgc2VydmVyID0gaHR0cC5jcmVhdGVTZXJ2ZXIoZXhwcmVzcylcbiAgICBzZXJ2ZXIubGlzdGVuKHBvcnQsICgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJleHByZXNzIHNlcnZlciBsaXN0ZW5pbmcgdG8gcG9ydCBcIiwgaG9zdCArIFwiOlwiICsgcG9ydClcbiAgICB9KVxuXG5cblxuXG59XG5cblxubW9kdWxlLmV4cG9ydHMgPSBleHByZXNzIl19",
    "map": {
      "version": 3,
      "sources": [
        "server.js"
      ],
      "names": [
        "dotenv",
        "require",
        "config",
        "port",
        "process",
        "env",
        "PORT",
        "host",
        "HOST",
        "ENV",
        "express",
        "router",
        "Express",
        "Router",
        "whitelist",
        "corsOptions",
        "origin",
        "callback",
        "indexOf",
        "Error",
        "set",
        "use",
        "certOpts",
        "key",
        "cert",
        "server",
        "https",
        "createServer",
        "listen",
        "console",
        "log",
        "httpexpress",
        "httpRouter",
        "get",
        "req",
        "res",
        "replace",
        "destination",
        "url",
        "join",
        "redirect",
        "httpServer",
        "http",
        "module",
        "exports"
      ],
      "mappings": "AAAA,a,CACA;;AACA;;AACA;;AACA;;AACA;;AAYA;;;;AAXA,MAAMA,MAAM,GAAGC,OAAO,CAAC,QAAD,CAAP,CAAkBC,MAAlB,EAAf,C,CAIA;;;AACA,MAAMC,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYC,IAAZ,IAAoB,IAAjC;AACA,MAAMC,IAAI,GAAGH,OAAO,CAACC,GAAR,CAAYG,IAAZ,IAAoB,WAAjC;AACA,MAAMH,GAAG,GAAGD,OAAO,CAACC,GAAR,CAAYI,GAAZ,IAAmB,aAA/B,C,CAGA;;AAIA;AACA,MAAMC,OAAO,GAAG,uBAAhB;;AACA,MAAMC,MAAM,GAAGC,iBAAQC,MAAR,EAAf;;AAGA,IAAIC,SAAS,GAAG,CACZ,mCADY,EAEZ,uCAFY,EAGZ,+BAHY,EAIZ,mCAJY,EAKZ,uBALY,CAAhB;AAOA,IAAIC,WAAW,GAAG;AACdC,EAAAA,MAAM,EAAE,CAACA,MAAD,EAASC,QAAT,KAAsB;AAC1B,QAAIH,SAAS,CAACI,OAAV,CAAkBF,MAAlB,MAA8B,CAAC,CAA/B,IAAoC,CAACA,MAAzC,EAAiD;AAC7CC,MAAAA,QAAQ,CAAC,IAAD,EAAO,IAAP,CAAR;AACH,KAFD,MAEO;AACHA,MAAAA,QAAQ,CAAC,IAAIE,KAAJ,CAAU,4BAAV,CAAD,CAAR;AACH;AACJ;AAPa,CAAlB;AAWAT,OAAO,CAACU,GAAR,CAAY,KAAZ,EAAmBf,GAAnB;AACAK,OAAO,CAACU,GAAR,CAAY,MAAZ,EAAoBjB,IAApB;AACAO,OAAO,CAACW,GAAR,CAAY,mBAAKN,WAAL,CAAZ;AACAL,OAAO,CAACW,GAAR,CAAY,GAAZ,EAAiBV,MAAjB;AACA,qBAAOD,OAAP;;AAMA,IAAIL,GAAG,IAAI,YAAX,EAAyB;AAKrB,QAAMiB,QAAQ,GAAG;AACbC,IAAAA,GAAG,EAAE,yBADQ;AAEbC,IAAAA,IAAI,EAAE;AAFO,GAAjB;;AAKA,QAAMC,MAAM,GAAGC,eAAMC,YAAN,CAAmBL,QAAnB,EAA6BZ,OAA7B,CAAf;;AACAe,EAAAA,MAAM,CAACG,MAAP,CAAczB,IAAd,EAAoB,MAAM;AACtB0B,IAAAA,OAAO,CAACC,GAAR,CAAY,sCAAsC3B,IAAlD;AACH,GAFD,EAXqB,CAerB;;AACA,QAAM4B,WAAW,GAAGrB,OAAO,EAA3B;AACA,QAAMsB,UAAU,GAAGtB,OAAO,CAACG,MAAR,EAAnB;AACAkB,EAAAA,WAAW,CAACV,GAAZ,CAAgB,GAAhB,EAAqBW,UAArB;AACAA,EAAAA,UAAU,CAACC,GAAX,CAAe,GAAf,EAAoB,CAACC,GAAD,EAAMC,GAAN,KAAc;AAC9B,UAAM5B,IAAI,GAAG2B,GAAG,CAACD,GAAJ,CAAQ,MAAR,CAAb,CAD8B,CAE1B;;AACJ1B,IAAAA,IAAI,GAAGA,IAAI,CAAC6B,OAAL,CAAa,OAAb,EAAsB,MAAM1B,OAAO,CAACuB,GAAR,CAAY,MAAZ,CAA5B,CAAP,CAH8B,CAI1B;;AACJ,UAAMI,WAAW,GAAG,CAAC,UAAD,EAAa9B,IAAb,EAAmB2B,GAAG,CAACI,GAAvB,EAA4BC,IAA5B,CAAiC,EAAjC,CAApB;AACA,WAAOJ,GAAG,CAACK,QAAJ,CAAaH,WAAb,CAAP;AACH,GAPD;;AAQA,QAAMI,UAAU,GAAGC,cAAKf,YAAL,CAAkBI,WAAlB,CAAnB;;AACAU,EAAAA,UAAU,CAACb,MAAX,CAAkB,EAAlB;AAKH,CAjCD,MAiCO;AAKH,QAAMH,MAAM,GAAGiB,cAAKf,YAAL,CAAkBjB,OAAlB,CAAf;;AACAe,EAAAA,MAAM,CAACG,MAAP,CAAczB,IAAd,EAAoB,MAAM;AACtB0B,IAAAA,OAAO,CAACC,GAAR,CAAY,mCAAZ,EAAiDvB,IAAI,GAAG,GAAP,GAAaJ,IAA9D;AACH,GAFD;AAOH;;AAGDwC,MAAM,CAACC,OAAP,GAAiBlC,OAAjB",
      "sourceRoot": "/var/www/corona/api",
      "sourcesContent": [
        "\"use strict\"\n// Dependancies\nimport Express from \"express\"\nimport http from \"http\"\nimport https from \"https\"\nimport cors from \"cors\"\nconst dotenv = require('dotenv').config();\n\n\n\n// ENV\nconst port = process.env.PORT || 8080\nconst host = process.env.HOST || \"localhost\"\nconst env = process.env.ENV || \"development\"\n\n\n// Components \nimport routes from \"./routes.js\"\n\n\n// Primary https express\nconst express = Express()\nconst router = Express.Router()\n\n\nvar whitelist = [\n    'http://latvijaskoronakarte.online',\n    'http://www.latvijaskoronakarte.online',\n    'http://latvijaskoronakarte.lv',\n    'http://www.latvijaskoronakarte.lv',\n    \"http://localhost:3000\"\n]\nvar corsOptions = {\n    origin: (origin, callback) => {\n        if (whitelist.indexOf(origin) !== -1 || !origin) {\n            callback(null, true)\n        } else {\n            callback(new Error('Not allowed by Corona CORS'))\n        }\n    }\n}\n\n\nexpress.set(\"env\", env)\nexpress.set(\"port\", port)\nexpress.use(cors(corsOptions))\nexpress.use(\"/\", router)\nroutes(express)\n\n\n\n\n\nif (env == \"production\") {\n\n\n\n\n    const certOpts = {\n        key: \"../certificates/key.pem\",\n        cert: \"../certificates/cert.pem\"\n    }\n\n    const server = https.createServer(certOpts, express)\n    server.listen(port, () => {\n        console.log(\"express server listening to port \" + port)\n    })\n\n    // Secondary http express\n    const httpexpress = express()\n    const httpRouter = express.Router()\n    httpexpress.use(\"*\", httpRouter)\n    httpRouter.get(\"*\", (req, res) => {\n        const host = req.get(\"Host\")\n            // replace the port in the host\n        host = host.replace(/:\\d+$/, \":\" + express.get(\"port\"))\n            // determine the redirect destination\n        const destination = [\"https://\", host, req.url].join(\"\")\n        return res.redirect(destination)\n    })\n    const httpServer = http.createServer(httpexpress)\n    httpServer.listen(80)\n\n\n\n\n} else {\n\n\n\n\n    const server = http.createServer(express)\n    server.listen(port, () => {\n        console.log(\"express server listening to port \", host + \":\" + port)\n    })\n\n\n\n\n}\n\n\nmodule.exports = express"
      ]
    },
    "sourceType": "script",
    "mtime": 1585776701188
  },
  "{\"sourceRoot\":\"/var/www/corona/api\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/var/www/corona/api\",\"filename\":\"/var/www/corona/api/routes.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/var/www/corona/api\",\"plugins\":[{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.8.7": {
    "metadata": {},
    "options": {
      "sourceRoot": "/var/www/corona/api",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/var/www/corona/api",
      "filename": "/var/www/corona/api/routes.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/var/www/corona/api",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-nullish-coalescing-operator",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "LogicalExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/var/www/corona/api/routes.js",
        "plugins": [
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/var/www/corona/api/routes.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/var/www/corona/api",
        "sourceFileName": "routes.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _SheetsController = _interopRequireDefault(require(\"./SheetsController.js\"));\n\nvar _fs = _interopRequireDefault(require(\"fs\"));\n\nvar _rssParser = _interopRequireDefault(require(\"rss-parser\"));\n\nvar _auth = _interopRequireDefault(require(\"./auth\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ASQ = require(\"asynquence\");\n\nlet parser = new _rssParser.default();\nlet keywords = [/korona/gi, /virus/gi, /viruss/gi, /corona/gi, /covid/gi, /19/gi, /atklāts/gi, /konstatēts/gi, /konstatets/gi, /izplatība/gi, /petijums/gi, /pētijums/gi, /covid-19/gi, /koronavīrusa/gi, /gadijums/gi, /covid/gi, /korona/gi];\n\nvar _default = express => {\n  express.get(\"/\", async (req, res) => {\n    var googleSheetsJson = await (0, _SheetsController.default)(\"infected\"); // console.log(googleSheetsJson.data)\n\n    _fs.default.appendFile('.counter', \"1 \" + new Date().toUTCString() + \"\\n\" + req.headers[\"user-agent\"] + \"\\n\", err => {\n      if (err) {\n        throw new Error(\"Corona error at api / path.\");\n      }\n\n      ;\n      console.log(\"1 \" + new Date().toUTCString() + \"\\n\");\n    });\n\n    res.send((await googleSheetsJson.toString()));\n  }); //https://www.tvnet.lv/rss\n\n  express.get(\"/tvnet\", async (req, res) => {\n    ASQ().then(async (done, msg) => {\n      let getRss = async () => {\n        let feed = await parser.parseURL('https://www.tvnet.lv/rss');\n        let filtered = feed.items.filter((el, i, arr) => {\n          let filteredTemp = keywords.map((el2, i, arr) => {\n            return el2.test(el.title);\n          });\n          return filteredTemp.includes(true) ? el : \"\";\n        });\n        return filtered;\n      };\n\n      done((await getRss()));\n    }).then((done, tvnetRss) => {\n      res.send(tvnetRss);\n    });\n  });\n  express.get(\"/facts\", async (req, res) => {\n    var googleSheetsJson = await (0, _SheetsController.default)(\"facts\");\n    res.send((await googleSheetsJson.toString()));\n  });\n};\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJvdXRlcy5qcyJdLCJuYW1lcyI6WyJBU1EiLCJyZXF1aXJlIiwicGFyc2VyIiwiUGFyc2VyIiwia2V5d29yZHMiLCJleHByZXNzIiwiZ2V0IiwicmVxIiwicmVzIiwiZ29vZ2xlU2hlZXRzSnNvbiIsImZzIiwiYXBwZW5kRmlsZSIsIkRhdGUiLCJ0b1VUQ1N0cmluZyIsImhlYWRlcnMiLCJlcnIiLCJFcnJvciIsImNvbnNvbGUiLCJsb2ciLCJzZW5kIiwidG9TdHJpbmciLCJ0aGVuIiwiZG9uZSIsIm1zZyIsImdldFJzcyIsImZlZWQiLCJwYXJzZVVSTCIsImZpbHRlcmVkIiwiaXRlbXMiLCJmaWx0ZXIiLCJlbCIsImkiLCJhcnIiLCJmaWx0ZXJlZFRlbXAiLCJtYXAiLCJlbDIiLCJ0ZXN0IiwidGl0bGUiLCJpbmNsdWRlcyIsInR2bmV0UnNzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFDQSxJQUFJQSxHQUFHLEdBQUdDLE9BQU8sQ0FBQyxZQUFELENBQWpCOztBQUVBLElBQUlDLE1BQU0sR0FBRyxJQUFJQyxrQkFBSixFQUFiO0FBRUEsSUFBSUMsUUFBUSxHQUFHLENBQ1gsVUFEVyxFQUVYLFNBRlcsRUFHWCxVQUhXLEVBSVgsVUFKVyxFQUtYLFNBTFcsRUFNWCxNQU5XLEVBT1gsV0FQVyxFQVFYLGNBUlcsRUFTWCxjQVRXLEVBVVgsYUFWVyxFQVdYLFlBWFcsRUFZWCxZQVpXLEVBYVgsWUFiVyxFQWNYLGdCQWRXLEVBZVgsWUFmVyxFQWdCWCxTQWhCVyxFQWlCWCxVQWpCVyxDQUFmOztlQXFCZ0JDLE9BQUQsSUFBYTtBQUd4QkEsRUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksR0FBWixFQUFrQixPQUFNQyxHQUFOLEVBQVdDLEdBQVgsS0FBbUI7QUFDakMsUUFBSUMsZ0JBQWdCLEdBQUcsTUFBTSwrQkFBb0IsVUFBcEIsQ0FBN0IsQ0FEaUMsQ0FFN0I7O0FBQ0pDLGdCQUFHQyxVQUFILENBQWMsVUFBZCxFQUEwQixPQUFPLElBQUlDLElBQUosR0FBV0MsV0FBWCxFQUFQLEdBQWtDLElBQWxDLEdBQXlDTixHQUFHLENBQUNPLE9BQUosQ0FBWSxZQUFaLENBQXpDLEdBQXFFLElBQS9GLEVBQXNHQyxHQUFELElBQVM7QUFDMUcsVUFBSUEsR0FBSixFQUFTO0FBQ0wsY0FBTSxJQUFJQyxLQUFKLENBQVUsNkJBQVYsQ0FBTjtBQUNIOztBQUFBO0FBQ0RDLE1BQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLE9BQU8sSUFBSU4sSUFBSixHQUFXQyxXQUFYLEVBQVAsR0FBa0MsSUFBOUM7QUFDSCxLQUxEOztBQU1BTCxJQUFBQSxHQUFHLENBQUNXLElBQUosRUFBUyxNQUFNVixnQkFBZ0IsQ0FBQ1csUUFBakIsRUFBZjtBQUNILEdBVkQsRUFId0IsQ0FpQnhCOztBQUNBZixFQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxRQUFaLEVBQXVCLE9BQU1DLEdBQU4sRUFBV0MsR0FBWCxLQUFtQjtBQUV0Q1IsSUFBQUEsR0FBRyxHQUNFcUIsSUFETCxDQUNVLE9BQU1DLElBQU4sRUFBWUMsR0FBWixLQUFvQjtBQUd0QixVQUFJQyxNQUFNLEdBQUcsWUFBVztBQUVwQixZQUFJQyxJQUFJLEdBQUcsTUFBTXZCLE1BQU0sQ0FBQ3dCLFFBQVAsQ0FBZ0IsMEJBQWhCLENBQWpCO0FBR0EsWUFBSUMsUUFBUSxHQUFHRixJQUFJLENBQUNHLEtBQUwsQ0FBV0MsTUFBWCxDQUFrQixDQUFDQyxFQUFELEVBQUtDLENBQUwsRUFBUUMsR0FBUixLQUFnQjtBQUM3QyxjQUFJQyxZQUFZLEdBQUc3QixRQUFRLENBQUM4QixHQUFULENBQWEsQ0FBQ0MsR0FBRCxFQUFNSixDQUFOLEVBQVNDLEdBQVQsS0FBaUI7QUFDN0MsbUJBQU9HLEdBQUcsQ0FBQ0MsSUFBSixDQUFTTixFQUFFLENBQUNPLEtBQVosQ0FBUDtBQUNILFdBRmtCLENBQW5CO0FBR0EsaUJBQU9KLFlBQVksQ0FBQ0ssUUFBYixDQUFzQixJQUF0QixJQUE4QlIsRUFBOUIsR0FBbUMsRUFBMUM7QUFFSCxTQU5jLENBQWY7QUFRQSxlQUFPSCxRQUFQO0FBRUgsT0FmRDs7QUFpQkFMLE1BQUFBLElBQUksRUFBQyxNQUFNRSxNQUFNLEVBQWIsRUFBSjtBQUdILEtBeEJMLEVBeUJLSCxJQXpCTCxDQXlCVSxDQUFDQyxJQUFELEVBQU9pQixRQUFQLEtBQW9CO0FBQ3RCL0IsTUFBQUEsR0FBRyxDQUFDVyxJQUFKLENBQVNvQixRQUFUO0FBQ0gsS0EzQkw7QUE4QkgsR0FoQ0Q7QUFtQ0FsQyxFQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxRQUFaLEVBQXVCLE9BQU1DLEdBQU4sRUFBV0MsR0FBWCxLQUFtQjtBQUN0QyxRQUFJQyxnQkFBZ0IsR0FBRyxNQUFNLCtCQUFvQixPQUFwQixDQUE3QjtBQUVBRCxJQUFBQSxHQUFHLENBQUNXLElBQUosRUFBUyxNQUFNVixnQkFBZ0IsQ0FBQ1csUUFBakIsRUFBZjtBQUNILEdBSkQ7QUFRSCxDIiwic291cmNlUm9vdCI6Ii92YXIvd3d3L2Nvcm9uYS9hcGkiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZ2V0R29vZ2xlU2hlZXRzSnNvbiBmcm9tIFwiLi9TaGVldHNDb250cm9sbGVyLmpzXCJcbmltcG9ydCBmcyBmcm9tIFwiZnNcIlxuaW1wb3J0IFBhcnNlciBmcm9tIFwicnNzLXBhcnNlclwiXG5pbXBvcnQgYXV0aCBmcm9tIFwiLi9hdXRoXCJcbnZhciBBU1EgPSByZXF1aXJlKFwiYXN5bnF1ZW5jZVwiKVxuXG5sZXQgcGFyc2VyID0gbmV3IFBhcnNlcigpO1xuXG5sZXQga2V5d29yZHMgPSBbXG4gICAgL2tvcm9uYS9naSxcbiAgICAvdmlydXMvZ2ksXG4gICAgL3ZpcnVzcy9naSxcbiAgICAvY29yb25hL2dpLFxuICAgIC9jb3ZpZC9naSxcbiAgICAvMTkvZ2ksXG4gICAgL2F0a2zEgXRzL2dpLFxuICAgIC9rb25zdGF0xJN0cy9naSxcbiAgICAva29uc3RhdGV0cy9naSxcbiAgICAvaXpwbGF0xKtiYS9naSxcbiAgICAvcGV0aWp1bXMvZ2ksXG4gICAgL3DEk3RpanVtcy9naSxcbiAgICAvY292aWQtMTkvZ2ksXG4gICAgL2tvcm9uYXbEq3J1c2EvZ2ksXG4gICAgL2dhZGlqdW1zL2dpLFxuICAgIC9jb3ZpZC9naSxcbiAgICAva29yb25hL2dpXG5dXG5cblxuZXhwb3J0IGRlZmF1bHQgKGV4cHJlc3MpID0+IHtcblxuXG4gICAgZXhwcmVzcy5nZXQoXCIvXCIsICBhc3luYyhyZXEsIHJlcykgPT4ge1xuICAgICAgICB2YXIgZ29vZ2xlU2hlZXRzSnNvbiA9IGF3YWl0IGdldEdvb2dsZVNoZWV0c0pzb24oXCJpbmZlY3RlZFwiKVxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZ29vZ2xlU2hlZXRzSnNvbi5kYXRhKVxuICAgICAgICBmcy5hcHBlbmRGaWxlKCcuY291bnRlcicsIFwiMSBcIiArIG5ldyBEYXRlKCkudG9VVENTdHJpbmcoKSArIFwiXFxuXCIgKyByZXEuaGVhZGVyc1tcInVzZXItYWdlbnRcIl0gKyBcIlxcblwiLCAoZXJyKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ29yb25hIGVycm9yIGF0IGFwaSAvIHBhdGguXCIpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCIxIFwiICsgbmV3IERhdGUoKS50b1VUQ1N0cmluZygpICsgXCJcXG5cIik7XG4gICAgICAgIH0pO1xuICAgICAgICByZXMuc2VuZChhd2FpdCBnb29nbGVTaGVldHNKc29uLnRvU3RyaW5nKCkpXG4gICAgfSk7XG5cblxuXG4gICAgLy9odHRwczovL3d3dy50dm5ldC5sdi9yc3NcbiAgICBleHByZXNzLmdldChcIi90dm5ldFwiLCAgYXN5bmMocmVxLCByZXMpID0+IHtcblxuICAgICAgICBBU1EoKVxuICAgICAgICAgICAgLnRoZW4oYXN5bmMoZG9uZSwgbXNnKSA9PiB7XG5cblxuICAgICAgICAgICAgICAgIGxldCBnZXRSc3MgPSBhc3luYygpID0+IHtcblxuICAgICAgICAgICAgICAgICAgICBsZXQgZmVlZCA9IGF3YWl0IHBhcnNlci5wYXJzZVVSTCgnaHR0cHM6Ly93d3cudHZuZXQubHYvcnNzJyk7XG5cblxuICAgICAgICAgICAgICAgICAgICBsZXQgZmlsdGVyZWQgPSBmZWVkLml0ZW1zLmZpbHRlcigoZWwsIGksIGFycikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZpbHRlcmVkVGVtcCA9IGtleXdvcmRzLm1hcCgoZWwyLCBpLCBhcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWwyLnRlc3QoZWwudGl0bGUpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlcmVkVGVtcC5pbmNsdWRlcyh0cnVlKSA/IGVsIDogXCJcIlxuXG4gICAgICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlcmVkXG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBkb25lKGF3YWl0IGdldFJzcygpKVxuXG5cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbigoZG9uZSwgdHZuZXRSc3MpID0+IHtcbiAgICAgICAgICAgICAgICByZXMuc2VuZCh0dm5ldFJzcylcbiAgICAgICAgICAgIH0pO1xuXG5cbiAgICB9KTtcblxuXG4gICAgZXhwcmVzcy5nZXQoXCIvZmFjdHNcIiwgIGFzeW5jKHJlcSwgcmVzKSA9PiB7XG4gICAgICAgIHZhciBnb29nbGVTaGVldHNKc29uID0gYXdhaXQgZ2V0R29vZ2xlU2hlZXRzSnNvbihcImZhY3RzXCIpXG5cbiAgICAgICAgcmVzLnNlbmQoYXdhaXQgZ29vZ2xlU2hlZXRzSnNvbi50b1N0cmluZygpKVxuICAgIH0pO1xuXG5cblxufTsiXX0=",
    "map": {
      "version": 3,
      "sources": [
        "routes.js"
      ],
      "names": [
        "ASQ",
        "require",
        "parser",
        "Parser",
        "keywords",
        "express",
        "get",
        "req",
        "res",
        "googleSheetsJson",
        "fs",
        "appendFile",
        "Date",
        "toUTCString",
        "headers",
        "err",
        "Error",
        "console",
        "log",
        "send",
        "toString",
        "then",
        "done",
        "msg",
        "getRss",
        "feed",
        "parseURL",
        "filtered",
        "items",
        "filter",
        "el",
        "i",
        "arr",
        "filteredTemp",
        "map",
        "el2",
        "test",
        "title",
        "includes",
        "tvnetRss"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AACA,IAAIA,GAAG,GAAGC,OAAO,CAAC,YAAD,CAAjB;;AAEA,IAAIC,MAAM,GAAG,IAAIC,kBAAJ,EAAb;AAEA,IAAIC,QAAQ,GAAG,CACX,UADW,EAEX,SAFW,EAGX,UAHW,EAIX,UAJW,EAKX,SALW,EAMX,MANW,EAOX,WAPW,EAQX,cARW,EASX,cATW,EAUX,aAVW,EAWX,YAXW,EAYX,YAZW,EAaX,YAbW,EAcX,gBAdW,EAeX,YAfW,EAgBX,SAhBW,EAiBX,UAjBW,CAAf;;eAqBgBC,OAAD,IAAa;AAGxBA,EAAAA,OAAO,CAACC,GAAR,CAAY,GAAZ,EAAkB,OAAMC,GAAN,EAAWC,GAAX,KAAmB;AACjC,QAAIC,gBAAgB,GAAG,MAAM,+BAAoB,UAApB,CAA7B,CADiC,CAE7B;;AACJC,gBAAGC,UAAH,CAAc,UAAd,EAA0B,OAAO,IAAIC,IAAJ,GAAWC,WAAX,EAAP,GAAkC,IAAlC,GAAyCN,GAAG,CAACO,OAAJ,CAAY,YAAZ,CAAzC,GAAqE,IAA/F,EAAsGC,GAAD,IAAS;AAC1G,UAAIA,GAAJ,EAAS;AACL,cAAM,IAAIC,KAAJ,CAAU,6BAAV,CAAN;AACH;;AAAA;AACDC,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAO,IAAIN,IAAJ,GAAWC,WAAX,EAAP,GAAkC,IAA9C;AACH,KALD;;AAMAL,IAAAA,GAAG,CAACW,IAAJ,EAAS,MAAMV,gBAAgB,CAACW,QAAjB,EAAf;AACH,GAVD,EAHwB,CAiBxB;;AACAf,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAuB,OAAMC,GAAN,EAAWC,GAAX,KAAmB;AAEtCR,IAAAA,GAAG,GACEqB,IADL,CACU,OAAMC,IAAN,EAAYC,GAAZ,KAAoB;AAGtB,UAAIC,MAAM,GAAG,YAAW;AAEpB,YAAIC,IAAI,GAAG,MAAMvB,MAAM,CAACwB,QAAP,CAAgB,0BAAhB,CAAjB;AAGA,YAAIC,QAAQ,GAAGF,IAAI,CAACG,KAAL,CAAWC,MAAX,CAAkB,CAACC,EAAD,EAAKC,CAAL,EAAQC,GAAR,KAAgB;AAC7C,cAAIC,YAAY,GAAG7B,QAAQ,CAAC8B,GAAT,CAAa,CAACC,GAAD,EAAMJ,CAAN,EAASC,GAAT,KAAiB;AAC7C,mBAAOG,GAAG,CAACC,IAAJ,CAASN,EAAE,CAACO,KAAZ,CAAP;AACH,WAFkB,CAAnB;AAGA,iBAAOJ,YAAY,CAACK,QAAb,CAAsB,IAAtB,IAA8BR,EAA9B,GAAmC,EAA1C;AAEH,SANc,CAAf;AAQA,eAAOH,QAAP;AAEH,OAfD;;AAiBAL,MAAAA,IAAI,EAAC,MAAME,MAAM,EAAb,EAAJ;AAGH,KAxBL,EAyBKH,IAzBL,CAyBU,CAACC,IAAD,EAAOiB,QAAP,KAAoB;AACtB/B,MAAAA,GAAG,CAACW,IAAJ,CAASoB,QAAT;AACH,KA3BL;AA8BH,GAhCD;AAmCAlC,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAuB,OAAMC,GAAN,EAAWC,GAAX,KAAmB;AACtC,QAAIC,gBAAgB,GAAG,MAAM,+BAAoB,OAApB,CAA7B;AAEAD,IAAAA,GAAG,CAACW,IAAJ,EAAS,MAAMV,gBAAgB,CAACW,QAAjB,EAAf;AACH,GAJD;AAQH,C",
      "sourceRoot": "/var/www/corona/api",
      "sourcesContent": [
        "import getGoogleSheetsJson from \"./SheetsController.js\"\nimport fs from \"fs\"\nimport Parser from \"rss-parser\"\nimport auth from \"./auth\"\nvar ASQ = require(\"asynquence\")\n\nlet parser = new Parser();\n\nlet keywords = [\n    /korona/gi,\n    /virus/gi,\n    /viruss/gi,\n    /corona/gi,\n    /covid/gi,\n    /19/gi,\n    /atklāts/gi,\n    /konstatēts/gi,\n    /konstatets/gi,\n    /izplatība/gi,\n    /petijums/gi,\n    /pētijums/gi,\n    /covid-19/gi,\n    /koronavīrusa/gi,\n    /gadijums/gi,\n    /covid/gi,\n    /korona/gi\n]\n\n\nexport default (express) => {\n\n\n    express.get(\"/\",  async(req, res) => {\n        var googleSheetsJson = await getGoogleSheetsJson(\"infected\")\n            // console.log(googleSheetsJson.data)\n        fs.appendFile('.counter', \"1 \" + new Date().toUTCString() + \"\\n\" + req.headers[\"user-agent\"] + \"\\n\", (err) => {\n            if (err) {\n                throw new Error(\"Corona error at api / path.\")\n            };\n            console.log(\"1 \" + new Date().toUTCString() + \"\\n\");\n        });\n        res.send(await googleSheetsJson.toString())\n    });\n\n\n\n    //https://www.tvnet.lv/rss\n    express.get(\"/tvnet\",  async(req, res) => {\n\n        ASQ()\n            .then(async(done, msg) => {\n\n\n                let getRss = async() => {\n\n                    let feed = await parser.parseURL('https://www.tvnet.lv/rss');\n\n\n                    let filtered = feed.items.filter((el, i, arr) => {\n                        let filteredTemp = keywords.map((el2, i, arr) => {\n                            return el2.test(el.title)\n                        })\n                        return filteredTemp.includes(true) ? el : \"\"\n\n                    })\n\n                    return filtered\n\n                }\n\n                done(await getRss())\n\n\n            })\n            .then((done, tvnetRss) => {\n                res.send(tvnetRss)\n            });\n\n\n    });\n\n\n    express.get(\"/facts\",  async(req, res) => {\n        var googleSheetsJson = await getGoogleSheetsJson(\"facts\")\n\n        res.send(await googleSheetsJson.toString())\n    });\n\n\n\n};"
      ]
    },
    "sourceType": "script",
    "mtime": 1585775362430
  },
  "{\"sourceRoot\":\"/var/www/corona/api\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/var/www/corona/api\",\"filename\":\"/var/www/corona/api/SheetsController.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/var/www/corona/api\",\"plugins\":[{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.8.7": {
    "metadata": {},
    "options": {
      "sourceRoot": "/var/www/corona/api",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/var/www/corona/api",
      "filename": "/var/www/corona/api/SheetsController.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/var/www/corona/api",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-nullish-coalescing-operator",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "LogicalExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/var/www/corona/api/SheetsController.js",
        "plugins": [
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/var/www/corona/api/SheetsController.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/var/www/corona/api",
        "sourceFileName": "SheetsController.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = getGoogleSheetsJson;\n\nvar _axios = _interopRequireDefault(require(\"axios\"));\n\nvar _csv = _interopRequireDefault(require(\"csv\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst dotenv = require('dotenv').config();\n\nasync function getGoogleSheetsJson(type) {\n  var googleSheetsCsv;\n\n  if (type === \"infected\") {\n    googleSheetsCsv = await _axios.default.get(process.env.GOOGLE_SHEETS_URL);\n  } else if (type == \"facts\") {\n    googleSheetsCsv = await _axios.default.get(process.env.GOOGLE_SHEETS_URL_FACTS);\n  } else {\n    googleSheetsCsv = await _axios.default.get(process.env.GOOGLE_SHEETS_URL);\n  }\n\n  var _converting = new Promise((resolve, reject) => {\n    _csv.default.parse(googleSheetsCsv.data, {\n      columns: true\n    }, function (err, data) {\n      resolve(JSON.stringify(data, null, 2));\n    });\n  });\n\n  var googleSheetsJson = await _converting;\n  return await googleSheetsJson;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlNoZWV0c0NvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiZG90ZW52IiwicmVxdWlyZSIsImNvbmZpZyIsImdldEdvb2dsZVNoZWV0c0pzb24iLCJ0eXBlIiwiZ29vZ2xlU2hlZXRzQ3N2IiwiYXhpb3MiLCJnZXQiLCJwcm9jZXNzIiwiZW52IiwiR09PR0xFX1NIRUVUU19VUkwiLCJHT09HTEVfU0hFRVRTX1VSTF9GQUNUUyIsIl9jb252ZXJ0aW5nIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJjc3YiLCJwYXJzZSIsImRhdGEiLCJjb2x1bW5zIiwiZXJyIiwiSlNPTiIsInN0cmluZ2lmeSIsImdvb2dsZVNoZWV0c0pzb24iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7OztBQUNBLE1BQU1BLE1BQU0sR0FBR0MsT0FBTyxDQUFDLFFBQUQsQ0FBUCxDQUFrQkMsTUFBbEIsRUFBZjs7QUFFZSxlQUFlQyxtQkFBZixDQUFtQ0MsSUFBbkMsRUFBeUM7QUFFcEQsTUFBSUMsZUFBSjs7QUFFQSxNQUFJRCxJQUFJLEtBQUssVUFBYixFQUF5QjtBQUVyQkMsSUFBQUEsZUFBZSxHQUFHLE1BQU1DLGVBQU1DLEdBQU4sQ0FBVUMsT0FBTyxDQUFDQyxHQUFSLENBQVlDLGlCQUF0QixDQUF4QjtBQUVILEdBSkQsTUFJTyxJQUFJTixJQUFJLElBQUksT0FBWixFQUFxQjtBQUV4QkMsSUFBQUEsZUFBZSxHQUFHLE1BQU1DLGVBQU1DLEdBQU4sQ0FBVUMsT0FBTyxDQUFDQyxHQUFSLENBQVlFLHVCQUF0QixDQUF4QjtBQUVILEdBSk0sTUFJQTtBQUVITixJQUFBQSxlQUFlLEdBQUcsTUFBTUMsZUFBTUMsR0FBTixDQUFVQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsaUJBQXRCLENBQXhCO0FBRUg7O0FBR0QsTUFBSUUsV0FBVyxHQUFHLElBQUlDLE9BQUosQ0FBWSxDQUFDQyxPQUFELEVBQVVDLE1BQVYsS0FBcUI7QUFDL0NDLGlCQUFJQyxLQUFKLENBQVVaLGVBQWUsQ0FBQ2EsSUFBMUIsRUFBZ0M7QUFBRUMsTUFBQUEsT0FBTyxFQUFFO0FBQVgsS0FBaEMsRUFBbUQsVUFBU0MsR0FBVCxFQUFjRixJQUFkLEVBQW9CO0FBQ25FSixNQUFBQSxPQUFPLENBQUNPLElBQUksQ0FBQ0MsU0FBTCxDQUFlSixJQUFmLEVBQXFCLElBQXJCLEVBQTJCLENBQTNCLENBQUQsQ0FBUDtBQUNILEtBRkQ7QUFHSCxHQUppQixDQUFsQjs7QUFNQSxNQUFJSyxnQkFBZ0IsR0FBRyxNQUFNWCxXQUE3QjtBQUVBLFNBQU8sTUFBTVcsZ0JBQWI7QUFFSCIsInNvdXJjZVJvb3QiOiIvdmFyL3d3dy9jb3JvbmEvYXBpIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGF4aW9zIGZyb20gXCJheGlvc1wiXG5pbXBvcnQgY3N2IGZyb20gXCJjc3ZcIlxuY29uc3QgZG90ZW52ID0gcmVxdWlyZSgnZG90ZW52JykuY29uZmlnKCk7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGdldEdvb2dsZVNoZWV0c0pzb24odHlwZSkge1xuXG4gICAgdmFyIGdvb2dsZVNoZWV0c0NzdlxuXG4gICAgaWYgKHR5cGUgPT09IFwiaW5mZWN0ZWRcIikge1xuXG4gICAgICAgIGdvb2dsZVNoZWV0c0NzdiA9IGF3YWl0IGF4aW9zLmdldChwcm9jZXNzLmVudi5HT09HTEVfU0hFRVRTX1VSTClcblxuICAgIH0gZWxzZSBpZiAodHlwZSA9PSBcImZhY3RzXCIpIHtcblxuICAgICAgICBnb29nbGVTaGVldHNDc3YgPSBhd2FpdCBheGlvcy5nZXQocHJvY2Vzcy5lbnYuR09PR0xFX1NIRUVUU19VUkxfRkFDVFMpXG5cbiAgICB9IGVsc2Uge1xuXG4gICAgICAgIGdvb2dsZVNoZWV0c0NzdiA9IGF3YWl0IGF4aW9zLmdldChwcm9jZXNzLmVudi5HT09HTEVfU0hFRVRTX1VSTClcblxuICAgIH1cblxuXG4gICAgdmFyIF9jb252ZXJ0aW5nID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjc3YucGFyc2UoZ29vZ2xlU2hlZXRzQ3N2LmRhdGEsIHsgY29sdW1uczogdHJ1ZSB9LCBmdW5jdGlvbihlcnIsIGRhdGEpIHtcbiAgICAgICAgICAgIHJlc29sdmUoSlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgMikpXG4gICAgICAgIH0pO1xuICAgIH0pXG5cbiAgICB2YXIgZ29vZ2xlU2hlZXRzSnNvbiA9IGF3YWl0IF9jb252ZXJ0aW5nXG5cbiAgICByZXR1cm4gYXdhaXQgZ29vZ2xlU2hlZXRzSnNvblxuXG59Il19",
    "map": {
      "version": 3,
      "sources": [
        "SheetsController.js"
      ],
      "names": [
        "dotenv",
        "require",
        "config",
        "getGoogleSheetsJson",
        "type",
        "googleSheetsCsv",
        "axios",
        "get",
        "process",
        "env",
        "GOOGLE_SHEETS_URL",
        "GOOGLE_SHEETS_URL_FACTS",
        "_converting",
        "Promise",
        "resolve",
        "reject",
        "csv",
        "parse",
        "data",
        "columns",
        "err",
        "JSON",
        "stringify",
        "googleSheetsJson"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AACA,MAAMA,MAAM,GAAGC,OAAO,CAAC,QAAD,CAAP,CAAkBC,MAAlB,EAAf;;AAEe,eAAeC,mBAAf,CAAmCC,IAAnC,EAAyC;AAEpD,MAAIC,eAAJ;;AAEA,MAAID,IAAI,KAAK,UAAb,EAAyB;AAErBC,IAAAA,eAAe,GAAG,MAAMC,eAAMC,GAAN,CAAUC,OAAO,CAACC,GAAR,CAAYC,iBAAtB,CAAxB;AAEH,GAJD,MAIO,IAAIN,IAAI,IAAI,OAAZ,EAAqB;AAExBC,IAAAA,eAAe,GAAG,MAAMC,eAAMC,GAAN,CAAUC,OAAO,CAACC,GAAR,CAAYE,uBAAtB,CAAxB;AAEH,GAJM,MAIA;AAEHN,IAAAA,eAAe,GAAG,MAAMC,eAAMC,GAAN,CAAUC,OAAO,CAACC,GAAR,CAAYC,iBAAtB,CAAxB;AAEH;;AAGD,MAAIE,WAAW,GAAG,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AAC/CC,iBAAIC,KAAJ,CAAUZ,eAAe,CAACa,IAA1B,EAAgC;AAAEC,MAAAA,OAAO,EAAE;AAAX,KAAhC,EAAmD,UAASC,GAAT,EAAcF,IAAd,EAAoB;AACnEJ,MAAAA,OAAO,CAACO,IAAI,CAACC,SAAL,CAAeJ,IAAf,EAAqB,IAArB,EAA2B,CAA3B,CAAD,CAAP;AACH,KAFD;AAGH,GAJiB,CAAlB;;AAMA,MAAIK,gBAAgB,GAAG,MAAMX,WAA7B;AAEA,SAAO,MAAMW,gBAAb;AAEH",
      "sourceRoot": "/var/www/corona/api",
      "sourcesContent": [
        "import axios from \"axios\"\nimport csv from \"csv\"\nconst dotenv = require('dotenv').config();\n\nexport default async function getGoogleSheetsJson(type) {\n\n    var googleSheetsCsv\n\n    if (type === \"infected\") {\n\n        googleSheetsCsv = await axios.get(process.env.GOOGLE_SHEETS_URL)\n\n    } else if (type == \"facts\") {\n\n        googleSheetsCsv = await axios.get(process.env.GOOGLE_SHEETS_URL_FACTS)\n\n    } else {\n\n        googleSheetsCsv = await axios.get(process.env.GOOGLE_SHEETS_URL)\n\n    }\n\n\n    var _converting = new Promise((resolve, reject) => {\n        csv.parse(googleSheetsCsv.data, { columns: true }, function(err, data) {\n            resolve(JSON.stringify(data, null, 2))\n        });\n    })\n\n    var googleSheetsJson = await _converting\n\n    return await googleSheetsJson\n\n}"
      ]
    },
    "sourceType": "script",
    "mtime": 1585082218197
  },
  "{\"sourceRoot\":\"/var/www/corona/api\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/var/www/corona/api\",\"filename\":\"/var/www/corona/api/routes.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/var/www/corona/api\",\"plugins\":[{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.8.7": {
    "metadata": {},
    "options": {
      "sourceRoot": "/var/www/corona/api",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/var/www/corona/api",
      "filename": "/var/www/corona/api/routes.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/var/www/corona/api",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-nullish-coalescing-operator",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "LogicalExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/var/www/corona/api/routes.js",
        "plugins": [
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/var/www/corona/api/routes.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/var/www/corona/api",
        "sourceFileName": "routes.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _SheetsController = _interopRequireDefault(require(\"./SheetsController.js\"));\n\nvar _fs = _interopRequireDefault(require(\"fs\"));\n\nvar _rssParser = _interopRequireDefault(require(\"rss-parser\"));\n\nvar _auth = _interopRequireDefault(require(\"./auth\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ASQ = require(\"asynquence\");\n\nlet parser = new _rssParser.default();\nlet keywords = [/korona/gi, /virus/gi, /viruss/gi, /corona/gi, /covid/gi, /19/gi, /atklāts/gi, /konstatēts/gi, /konstatets/gi, /izplatība/gi, /petijums/gi, /pētijums/gi, /covid-19/gi, /koronavīrusa/gi, /gadijums/gi, /covid/gi, /korona/gi];\n\nvar _default = express => {\n  express.get(\"/\", _auth.default, async (req, res) => {\n    var googleSheetsJson = await (0, _SheetsController.default)(\"infected\"); // console.log(googleSheetsJson.data)\n\n    _fs.default.appendFile('.counter', \"1 \" + new Date().toUTCString() + \"\\n\" + req.headers[\"user-agent\"] + \"\\n\", err => {\n      if (err) {\n        throw new Error(\"Corona error at api / path.\");\n      }\n\n      ;\n      console.log(\"1 \" + new Date().toUTCString() + \"\\n\");\n    });\n\n    res.send((await googleSheetsJson.toString()));\n  }); //https://www.tvnet.lv/rss\n\n  express.get(\"/tvnet\", _auth.default, async (req, res) => {\n    ASQ().then(async (done, msg) => {\n      let getRss = async () => {\n        let feed = await parser.parseURL('https://www.tvnet.lv/rss');\n        let filtered = feed.items.filter((el, i, arr) => {\n          let filteredTemp = keywords.map((el2, i, arr) => {\n            return el2.test(el.title);\n          });\n          return filteredTemp.includes(true) ? el : \"\";\n        });\n        return filtered;\n      };\n\n      done((await getRss()));\n    }).then((done, tvnetRss) => {\n      res.send(tvnetRss);\n    });\n  });\n  express.get(\"/facts\", _auth.default, async (req, res) => {\n    var googleSheetsJson = await (0, _SheetsController.default)(\"facts\");\n    res.send((await googleSheetsJson.toString()));\n  });\n};\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJvdXRlcy5qcyJdLCJuYW1lcyI6WyJBU1EiLCJyZXF1aXJlIiwicGFyc2VyIiwiUGFyc2VyIiwia2V5d29yZHMiLCJleHByZXNzIiwiZ2V0IiwiYXV0aCIsInJlcSIsInJlcyIsImdvb2dsZVNoZWV0c0pzb24iLCJmcyIsImFwcGVuZEZpbGUiLCJEYXRlIiwidG9VVENTdHJpbmciLCJoZWFkZXJzIiwiZXJyIiwiRXJyb3IiLCJjb25zb2xlIiwibG9nIiwic2VuZCIsInRvU3RyaW5nIiwidGhlbiIsImRvbmUiLCJtc2ciLCJnZXRSc3MiLCJmZWVkIiwicGFyc2VVUkwiLCJmaWx0ZXJlZCIsIml0ZW1zIiwiZmlsdGVyIiwiZWwiLCJpIiwiYXJyIiwiZmlsdGVyZWRUZW1wIiwibWFwIiwiZWwyIiwidGVzdCIsInRpdGxlIiwiaW5jbHVkZXMiLCJ0dm5ldFJzcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBQ0EsSUFBSUEsR0FBRyxHQUFHQyxPQUFPLENBQUMsWUFBRCxDQUFqQjs7QUFFQSxJQUFJQyxNQUFNLEdBQUcsSUFBSUMsa0JBQUosRUFBYjtBQUVBLElBQUlDLFFBQVEsR0FBRyxDQUNYLFVBRFcsRUFFWCxTQUZXLEVBR1gsVUFIVyxFQUlYLFVBSlcsRUFLWCxTQUxXLEVBTVgsTUFOVyxFQU9YLFdBUFcsRUFRWCxjQVJXLEVBU1gsY0FUVyxFQVVYLGFBVlcsRUFXWCxZQVhXLEVBWVgsWUFaVyxFQWFYLFlBYlcsRUFjWCxnQkFkVyxFQWVYLFlBZlcsRUFnQlgsU0FoQlcsRUFpQlgsVUFqQlcsQ0FBZjs7ZUFxQmdCQyxPQUFELElBQWE7QUFHeEJBLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLEdBQVosRUFBaUJDLGFBQWpCLEVBQXVCLE9BQU1DLEdBQU4sRUFBV0MsR0FBWCxLQUFtQjtBQUN0QyxRQUFJQyxnQkFBZ0IsR0FBRyxNQUFNLCtCQUFvQixVQUFwQixDQUE3QixDQURzQyxDQUVsQzs7QUFDSkMsZ0JBQUdDLFVBQUgsQ0FBYyxVQUFkLEVBQTBCLE9BQU8sSUFBSUMsSUFBSixHQUFXQyxXQUFYLEVBQVAsR0FBa0MsSUFBbEMsR0FBeUNOLEdBQUcsQ0FBQ08sT0FBSixDQUFZLFlBQVosQ0FBekMsR0FBcUUsSUFBL0YsRUFBc0dDLEdBQUQsSUFBUztBQUMxRyxVQUFJQSxHQUFKLEVBQVM7QUFDTCxjQUFNLElBQUlDLEtBQUosQ0FBVSw2QkFBVixDQUFOO0FBQ0g7O0FBQUE7QUFDREMsTUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksT0FBTyxJQUFJTixJQUFKLEdBQVdDLFdBQVgsRUFBUCxHQUFrQyxJQUE5QztBQUNILEtBTEQ7O0FBTUFMLElBQUFBLEdBQUcsQ0FBQ1csSUFBSixFQUFTLE1BQU1WLGdCQUFnQixDQUFDVyxRQUFqQixFQUFmO0FBQ0gsR0FWRCxFQUh3QixDQWlCeEI7O0FBQ0FoQixFQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxRQUFaLEVBQXNCQyxhQUF0QixFQUE0QixPQUFNQyxHQUFOLEVBQVdDLEdBQVgsS0FBbUI7QUFFM0NULElBQUFBLEdBQUcsR0FDRXNCLElBREwsQ0FDVSxPQUFNQyxJQUFOLEVBQVlDLEdBQVosS0FBb0I7QUFHdEIsVUFBSUMsTUFBTSxHQUFHLFlBQVc7QUFFcEIsWUFBSUMsSUFBSSxHQUFHLE1BQU14QixNQUFNLENBQUN5QixRQUFQLENBQWdCLDBCQUFoQixDQUFqQjtBQUdBLFlBQUlDLFFBQVEsR0FBR0YsSUFBSSxDQUFDRyxLQUFMLENBQVdDLE1BQVgsQ0FBa0IsQ0FBQ0MsRUFBRCxFQUFLQyxDQUFMLEVBQVFDLEdBQVIsS0FBZ0I7QUFDN0MsY0FBSUMsWUFBWSxHQUFHOUIsUUFBUSxDQUFDK0IsR0FBVCxDQUFhLENBQUNDLEdBQUQsRUFBTUosQ0FBTixFQUFTQyxHQUFULEtBQWlCO0FBQzdDLG1CQUFPRyxHQUFHLENBQUNDLElBQUosQ0FBU04sRUFBRSxDQUFDTyxLQUFaLENBQVA7QUFDSCxXQUZrQixDQUFuQjtBQUdBLGlCQUFPSixZQUFZLENBQUNLLFFBQWIsQ0FBc0IsSUFBdEIsSUFBOEJSLEVBQTlCLEdBQW1DLEVBQTFDO0FBRUgsU0FOYyxDQUFmO0FBUUEsZUFBT0gsUUFBUDtBQUVILE9BZkQ7O0FBaUJBTCxNQUFBQSxJQUFJLEVBQUMsTUFBTUUsTUFBTSxFQUFiLEVBQUo7QUFHSCxLQXhCTCxFQXlCS0gsSUF6QkwsQ0F5QlUsQ0FBQ0MsSUFBRCxFQUFPaUIsUUFBUCxLQUFvQjtBQUN0Qi9CLE1BQUFBLEdBQUcsQ0FBQ1csSUFBSixDQUFTb0IsUUFBVDtBQUNILEtBM0JMO0FBOEJILEdBaENEO0FBbUNBbkMsRUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksUUFBWixFQUFzQkMsYUFBdEIsRUFBNEIsT0FBTUMsR0FBTixFQUFXQyxHQUFYLEtBQW1CO0FBQzNDLFFBQUlDLGdCQUFnQixHQUFHLE1BQU0sK0JBQW9CLE9BQXBCLENBQTdCO0FBRUFELElBQUFBLEdBQUcsQ0FBQ1csSUFBSixFQUFTLE1BQU1WLGdCQUFnQixDQUFDVyxRQUFqQixFQUFmO0FBQ0gsR0FKRDtBQVFILEMiLCJzb3VyY2VSb290IjoiL3Zhci93d3cvY29yb25hL2FwaSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBnZXRHb29nbGVTaGVldHNKc29uIGZyb20gXCIuL1NoZWV0c0NvbnRyb2xsZXIuanNcIlxuaW1wb3J0IGZzIGZyb20gXCJmc1wiXG5pbXBvcnQgUGFyc2VyIGZyb20gXCJyc3MtcGFyc2VyXCJcbmltcG9ydCBhdXRoIGZyb20gXCIuL2F1dGhcIlxudmFyIEFTUSA9IHJlcXVpcmUoXCJhc3lucXVlbmNlXCIpXG5cbmxldCBwYXJzZXIgPSBuZXcgUGFyc2VyKCk7XG5cbmxldCBrZXl3b3JkcyA9IFtcbiAgICAva29yb25hL2dpLFxuICAgIC92aXJ1cy9naSxcbiAgICAvdmlydXNzL2dpLFxuICAgIC9jb3JvbmEvZ2ksXG4gICAgL2NvdmlkL2dpLFxuICAgIC8xOS9naSxcbiAgICAvYXRrbMSBdHMvZ2ksXG4gICAgL2tvbnN0YXTEk3RzL2dpLFxuICAgIC9rb25zdGF0ZXRzL2dpLFxuICAgIC9penBsYXTEq2JhL2dpLFxuICAgIC9wZXRpanVtcy9naSxcbiAgICAvcMSTdGlqdW1zL2dpLFxuICAgIC9jb3ZpZC0xOS9naSxcbiAgICAva29yb25hdsSrcnVzYS9naSxcbiAgICAvZ2FkaWp1bXMvZ2ksXG4gICAgL2NvdmlkL2dpLFxuICAgIC9rb3JvbmEvZ2lcbl1cblxuXG5leHBvcnQgZGVmYXVsdCAoZXhwcmVzcykgPT4ge1xuXG5cbiAgICBleHByZXNzLmdldChcIi9cIiwgYXV0aCwgYXN5bmMocmVxLCByZXMpID0+IHtcbiAgICAgICAgdmFyIGdvb2dsZVNoZWV0c0pzb24gPSBhd2FpdCBnZXRHb29nbGVTaGVldHNKc29uKFwiaW5mZWN0ZWRcIilcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGdvb2dsZVNoZWV0c0pzb24uZGF0YSlcbiAgICAgICAgZnMuYXBwZW5kRmlsZSgnLmNvdW50ZXInLCBcIjEgXCIgKyBuZXcgRGF0ZSgpLnRvVVRDU3RyaW5nKCkgKyBcIlxcblwiICsgcmVxLmhlYWRlcnNbXCJ1c2VyLWFnZW50XCJdICsgXCJcXG5cIiwgKGVycikgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvcm9uYSBlcnJvciBhdCBhcGkgLyBwYXRoLlwiKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiMSBcIiArIG5ldyBEYXRlKCkudG9VVENTdHJpbmcoKSArIFwiXFxuXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmVzLnNlbmQoYXdhaXQgZ29vZ2xlU2hlZXRzSnNvbi50b1N0cmluZygpKVxuICAgIH0pO1xuXG5cblxuICAgIC8vaHR0cHM6Ly93d3cudHZuZXQubHYvcnNzXG4gICAgZXhwcmVzcy5nZXQoXCIvdHZuZXRcIiwgYXV0aCwgYXN5bmMocmVxLCByZXMpID0+IHtcblxuICAgICAgICBBU1EoKVxuICAgICAgICAgICAgLnRoZW4oYXN5bmMoZG9uZSwgbXNnKSA9PiB7XG5cblxuICAgICAgICAgICAgICAgIGxldCBnZXRSc3MgPSBhc3luYygpID0+IHtcblxuICAgICAgICAgICAgICAgICAgICBsZXQgZmVlZCA9IGF3YWl0IHBhcnNlci5wYXJzZVVSTCgnaHR0cHM6Ly93d3cudHZuZXQubHYvcnNzJyk7XG5cblxuICAgICAgICAgICAgICAgICAgICBsZXQgZmlsdGVyZWQgPSBmZWVkLml0ZW1zLmZpbHRlcigoZWwsIGksIGFycikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZpbHRlcmVkVGVtcCA9IGtleXdvcmRzLm1hcCgoZWwyLCBpLCBhcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWwyLnRlc3QoZWwudGl0bGUpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlcmVkVGVtcC5pbmNsdWRlcyh0cnVlKSA/IGVsIDogXCJcIlxuXG4gICAgICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlcmVkXG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBkb25lKGF3YWl0IGdldFJzcygpKVxuXG5cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbigoZG9uZSwgdHZuZXRSc3MpID0+IHtcbiAgICAgICAgICAgICAgICByZXMuc2VuZCh0dm5ldFJzcylcbiAgICAgICAgICAgIH0pO1xuXG5cbiAgICB9KTtcblxuXG4gICAgZXhwcmVzcy5nZXQoXCIvZmFjdHNcIiwgYXV0aCwgYXN5bmMocmVxLCByZXMpID0+IHtcbiAgICAgICAgdmFyIGdvb2dsZVNoZWV0c0pzb24gPSBhd2FpdCBnZXRHb29nbGVTaGVldHNKc29uKFwiZmFjdHNcIilcblxuICAgICAgICByZXMuc2VuZChhd2FpdCBnb29nbGVTaGVldHNKc29uLnRvU3RyaW5nKCkpXG4gICAgfSk7XG5cblxuXG59OyJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "routes.js"
      ],
      "names": [
        "ASQ",
        "require",
        "parser",
        "Parser",
        "keywords",
        "express",
        "get",
        "auth",
        "req",
        "res",
        "googleSheetsJson",
        "fs",
        "appendFile",
        "Date",
        "toUTCString",
        "headers",
        "err",
        "Error",
        "console",
        "log",
        "send",
        "toString",
        "then",
        "done",
        "msg",
        "getRss",
        "feed",
        "parseURL",
        "filtered",
        "items",
        "filter",
        "el",
        "i",
        "arr",
        "filteredTemp",
        "map",
        "el2",
        "test",
        "title",
        "includes",
        "tvnetRss"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AACA,IAAIA,GAAG,GAAGC,OAAO,CAAC,YAAD,CAAjB;;AAEA,IAAIC,MAAM,GAAG,IAAIC,kBAAJ,EAAb;AAEA,IAAIC,QAAQ,GAAG,CACX,UADW,EAEX,SAFW,EAGX,UAHW,EAIX,UAJW,EAKX,SALW,EAMX,MANW,EAOX,WAPW,EAQX,cARW,EASX,cATW,EAUX,aAVW,EAWX,YAXW,EAYX,YAZW,EAaX,YAbW,EAcX,gBAdW,EAeX,YAfW,EAgBX,SAhBW,EAiBX,UAjBW,CAAf;;eAqBgBC,OAAD,IAAa;AAGxBA,EAAAA,OAAO,CAACC,GAAR,CAAY,GAAZ,EAAiBC,aAAjB,EAAuB,OAAMC,GAAN,EAAWC,GAAX,KAAmB;AACtC,QAAIC,gBAAgB,GAAG,MAAM,+BAAoB,UAApB,CAA7B,CADsC,CAElC;;AACJC,gBAAGC,UAAH,CAAc,UAAd,EAA0B,OAAO,IAAIC,IAAJ,GAAWC,WAAX,EAAP,GAAkC,IAAlC,GAAyCN,GAAG,CAACO,OAAJ,CAAY,YAAZ,CAAzC,GAAqE,IAA/F,EAAsGC,GAAD,IAAS;AAC1G,UAAIA,GAAJ,EAAS;AACL,cAAM,IAAIC,KAAJ,CAAU,6BAAV,CAAN;AACH;;AAAA;AACDC,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAO,IAAIN,IAAJ,GAAWC,WAAX,EAAP,GAAkC,IAA9C;AACH,KALD;;AAMAL,IAAAA,GAAG,CAACW,IAAJ,EAAS,MAAMV,gBAAgB,CAACW,QAAjB,EAAf;AACH,GAVD,EAHwB,CAiBxB;;AACAhB,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBC,aAAtB,EAA4B,OAAMC,GAAN,EAAWC,GAAX,KAAmB;AAE3CT,IAAAA,GAAG,GACEsB,IADL,CACU,OAAMC,IAAN,EAAYC,GAAZ,KAAoB;AAGtB,UAAIC,MAAM,GAAG,YAAW;AAEpB,YAAIC,IAAI,GAAG,MAAMxB,MAAM,CAACyB,QAAP,CAAgB,0BAAhB,CAAjB;AAGA,YAAIC,QAAQ,GAAGF,IAAI,CAACG,KAAL,CAAWC,MAAX,CAAkB,CAACC,EAAD,EAAKC,CAAL,EAAQC,GAAR,KAAgB;AAC7C,cAAIC,YAAY,GAAG9B,QAAQ,CAAC+B,GAAT,CAAa,CAACC,GAAD,EAAMJ,CAAN,EAASC,GAAT,KAAiB;AAC7C,mBAAOG,GAAG,CAACC,IAAJ,CAASN,EAAE,CAACO,KAAZ,CAAP;AACH,WAFkB,CAAnB;AAGA,iBAAOJ,YAAY,CAACK,QAAb,CAAsB,IAAtB,IAA8BR,EAA9B,GAAmC,EAA1C;AAEH,SANc,CAAf;AAQA,eAAOH,QAAP;AAEH,OAfD;;AAiBAL,MAAAA,IAAI,EAAC,MAAME,MAAM,EAAb,EAAJ;AAGH,KAxBL,EAyBKH,IAzBL,CAyBU,CAACC,IAAD,EAAOiB,QAAP,KAAoB;AACtB/B,MAAAA,GAAG,CAACW,IAAJ,CAASoB,QAAT;AACH,KA3BL;AA8BH,GAhCD;AAmCAnC,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBC,aAAtB,EAA4B,OAAMC,GAAN,EAAWC,GAAX,KAAmB;AAC3C,QAAIC,gBAAgB,GAAG,MAAM,+BAAoB,OAApB,CAA7B;AAEAD,IAAAA,GAAG,CAACW,IAAJ,EAAS,MAAMV,gBAAgB,CAACW,QAAjB,EAAf;AACH,GAJD;AAQH,C",
      "sourceRoot": "/var/www/corona/api",
      "sourcesContent": [
        "import getGoogleSheetsJson from \"./SheetsController.js\"\nimport fs from \"fs\"\nimport Parser from \"rss-parser\"\nimport auth from \"./auth\"\nvar ASQ = require(\"asynquence\")\n\nlet parser = new Parser();\n\nlet keywords = [\n    /korona/gi,\n    /virus/gi,\n    /viruss/gi,\n    /corona/gi,\n    /covid/gi,\n    /19/gi,\n    /atklāts/gi,\n    /konstatēts/gi,\n    /konstatets/gi,\n    /izplatība/gi,\n    /petijums/gi,\n    /pētijums/gi,\n    /covid-19/gi,\n    /koronavīrusa/gi,\n    /gadijums/gi,\n    /covid/gi,\n    /korona/gi\n]\n\n\nexport default (express) => {\n\n\n    express.get(\"/\", auth, async(req, res) => {\n        var googleSheetsJson = await getGoogleSheetsJson(\"infected\")\n            // console.log(googleSheetsJson.data)\n        fs.appendFile('.counter', \"1 \" + new Date().toUTCString() + \"\\n\" + req.headers[\"user-agent\"] + \"\\n\", (err) => {\n            if (err) {\n                throw new Error(\"Corona error at api / path.\")\n            };\n            console.log(\"1 \" + new Date().toUTCString() + \"\\n\");\n        });\n        res.send(await googleSheetsJson.toString())\n    });\n\n\n\n    //https://www.tvnet.lv/rss\n    express.get(\"/tvnet\", auth, async(req, res) => {\n\n        ASQ()\n            .then(async(done, msg) => {\n\n\n                let getRss = async() => {\n\n                    let feed = await parser.parseURL('https://www.tvnet.lv/rss');\n\n\n                    let filtered = feed.items.filter((el, i, arr) => {\n                        let filteredTemp = keywords.map((el2, i, arr) => {\n                            return el2.test(el.title)\n                        })\n                        return filteredTemp.includes(true) ? el : \"\"\n\n                    })\n\n                    return filtered\n\n                }\n\n                done(await getRss())\n\n\n            })\n            .then((done, tvnetRss) => {\n                res.send(tvnetRss)\n            });\n\n\n    });\n\n\n    express.get(\"/facts\", auth, async(req, res) => {\n        var googleSheetsJson = await getGoogleSheetsJson(\"facts\")\n\n        res.send(await googleSheetsJson.toString())\n    });\n\n\n\n};"
      ]
    },
    "sourceType": "script",
    "mtime": 1585776783973
  },
  "{\"sourceRoot\":\"/var/www/corona/api\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/var/www/corona/api\",\"filename\":\"/var/www/corona/api/SheetsController.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/var/www/corona/api\",\"plugins\":[{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.8.7": {
    "metadata": {},
    "options": {
      "sourceRoot": "/var/www/corona/api",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/var/www/corona/api",
      "filename": "/var/www/corona/api/SheetsController.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/var/www/corona/api",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-nullish-coalescing-operator",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "LogicalExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/var/www/corona/api/SheetsController.js",
        "plugins": [
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/var/www/corona/api/SheetsController.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/var/www/corona/api",
        "sourceFileName": "SheetsController.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = getGoogleSheetsJson;\n\nvar _axios = _interopRequireDefault(require(\"axios\"));\n\nvar _csv = _interopRequireDefault(require(\"csv\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst dotenv = require('dotenv').config();\n\nasync function getGoogleSheetsJson(type) {\n  var googleSheetsCsv;\n\n  if (type === \"infected\") {\n    googleSheetsCsv = await _axios.default.get(process.env.GOOGLE_SHEETS_URL);\n  } else if (type == \"facts\") {\n    googleSheetsCsv = await _axios.default.get(process.env.GOOGLE_SHEETS_URL_FACTS);\n  } else {\n    googleSheetsCsv = await _axios.default.get(process.env.GOOGLE_SHEETS_URL);\n  }\n\n  var _converting = new Promise((resolve, reject) => {\n    _csv.default.parse(googleSheetsCsv.data, {\n      columns: true\n    }, function (err, data) {\n      resolve(JSON.stringify(data, null, 2));\n    });\n  });\n\n  var googleSheetsJson = await _converting;\n  return await googleSheetsJson;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlNoZWV0c0NvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiZG90ZW52IiwicmVxdWlyZSIsImNvbmZpZyIsImdldEdvb2dsZVNoZWV0c0pzb24iLCJ0eXBlIiwiZ29vZ2xlU2hlZXRzQ3N2IiwiYXhpb3MiLCJnZXQiLCJwcm9jZXNzIiwiZW52IiwiR09PR0xFX1NIRUVUU19VUkwiLCJHT09HTEVfU0hFRVRTX1VSTF9GQUNUUyIsIl9jb252ZXJ0aW5nIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJjc3YiLCJwYXJzZSIsImRhdGEiLCJjb2x1bW5zIiwiZXJyIiwiSlNPTiIsInN0cmluZ2lmeSIsImdvb2dsZVNoZWV0c0pzb24iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7OztBQUNBLE1BQU1BLE1BQU0sR0FBR0MsT0FBTyxDQUFDLFFBQUQsQ0FBUCxDQUFrQkMsTUFBbEIsRUFBZjs7QUFFZSxlQUFlQyxtQkFBZixDQUFtQ0MsSUFBbkMsRUFBeUM7QUFFcEQsTUFBSUMsZUFBSjs7QUFFQSxNQUFJRCxJQUFJLEtBQUssVUFBYixFQUF5QjtBQUVyQkMsSUFBQUEsZUFBZSxHQUFHLE1BQU1DLGVBQU1DLEdBQU4sQ0FBVUMsT0FBTyxDQUFDQyxHQUFSLENBQVlDLGlCQUF0QixDQUF4QjtBQUVILEdBSkQsTUFJTyxJQUFJTixJQUFJLElBQUksT0FBWixFQUFxQjtBQUV4QkMsSUFBQUEsZUFBZSxHQUFHLE1BQU1DLGVBQU1DLEdBQU4sQ0FBVUMsT0FBTyxDQUFDQyxHQUFSLENBQVlFLHVCQUF0QixDQUF4QjtBQUVILEdBSk0sTUFJQTtBQUVITixJQUFBQSxlQUFlLEdBQUcsTUFBTUMsZUFBTUMsR0FBTixDQUFVQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsaUJBQXRCLENBQXhCO0FBRUg7O0FBR0QsTUFBSUUsV0FBVyxHQUFHLElBQUlDLE9BQUosQ0FBWSxDQUFDQyxPQUFELEVBQVVDLE1BQVYsS0FBcUI7QUFDL0NDLGlCQUFJQyxLQUFKLENBQVVaLGVBQWUsQ0FBQ2EsSUFBMUIsRUFBZ0M7QUFBRUMsTUFBQUEsT0FBTyxFQUFFO0FBQVgsS0FBaEMsRUFBbUQsVUFBU0MsR0FBVCxFQUFjRixJQUFkLEVBQW9CO0FBQ25FSixNQUFBQSxPQUFPLENBQUNPLElBQUksQ0FBQ0MsU0FBTCxDQUFlSixJQUFmLEVBQXFCLElBQXJCLEVBQTJCLENBQTNCLENBQUQsQ0FBUDtBQUNILEtBRkQ7QUFHSCxHQUppQixDQUFsQjs7QUFNQSxNQUFJSyxnQkFBZ0IsR0FBRyxNQUFNWCxXQUE3QjtBQUVBLFNBQU8sTUFBTVcsZ0JBQWI7QUFFSCIsInNvdXJjZVJvb3QiOiIvdmFyL3d3dy9jb3JvbmEvYXBpIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGF4aW9zIGZyb20gXCJheGlvc1wiXG5pbXBvcnQgY3N2IGZyb20gXCJjc3ZcIlxuY29uc3QgZG90ZW52ID0gcmVxdWlyZSgnZG90ZW52JykuY29uZmlnKCk7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGdldEdvb2dsZVNoZWV0c0pzb24odHlwZSkge1xuXG4gICAgdmFyIGdvb2dsZVNoZWV0c0NzdlxuXG4gICAgaWYgKHR5cGUgPT09IFwiaW5mZWN0ZWRcIikge1xuXG4gICAgICAgIGdvb2dsZVNoZWV0c0NzdiA9IGF3YWl0IGF4aW9zLmdldChwcm9jZXNzLmVudi5HT09HTEVfU0hFRVRTX1VSTClcblxuICAgIH0gZWxzZSBpZiAodHlwZSA9PSBcImZhY3RzXCIpIHtcblxuICAgICAgICBnb29nbGVTaGVldHNDc3YgPSBhd2FpdCBheGlvcy5nZXQocHJvY2Vzcy5lbnYuR09PR0xFX1NIRUVUU19VUkxfRkFDVFMpXG5cbiAgICB9IGVsc2Uge1xuXG4gICAgICAgIGdvb2dsZVNoZWV0c0NzdiA9IGF3YWl0IGF4aW9zLmdldChwcm9jZXNzLmVudi5HT09HTEVfU0hFRVRTX1VSTClcblxuICAgIH1cblxuXG4gICAgdmFyIF9jb252ZXJ0aW5nID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjc3YucGFyc2UoZ29vZ2xlU2hlZXRzQ3N2LmRhdGEsIHsgY29sdW1uczogdHJ1ZSB9LCBmdW5jdGlvbihlcnIsIGRhdGEpIHtcbiAgICAgICAgICAgIHJlc29sdmUoSlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgMikpXG4gICAgICAgIH0pO1xuICAgIH0pXG5cbiAgICB2YXIgZ29vZ2xlU2hlZXRzSnNvbiA9IGF3YWl0IF9jb252ZXJ0aW5nXG5cbiAgICByZXR1cm4gYXdhaXQgZ29vZ2xlU2hlZXRzSnNvblxuXG59Il19",
    "map": {
      "version": 3,
      "sources": [
        "SheetsController.js"
      ],
      "names": [
        "dotenv",
        "require",
        "config",
        "getGoogleSheetsJson",
        "type",
        "googleSheetsCsv",
        "axios",
        "get",
        "process",
        "env",
        "GOOGLE_SHEETS_URL",
        "GOOGLE_SHEETS_URL_FACTS",
        "_converting",
        "Promise",
        "resolve",
        "reject",
        "csv",
        "parse",
        "data",
        "columns",
        "err",
        "JSON",
        "stringify",
        "googleSheetsJson"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AACA,MAAMA,MAAM,GAAGC,OAAO,CAAC,QAAD,CAAP,CAAkBC,MAAlB,EAAf;;AAEe,eAAeC,mBAAf,CAAmCC,IAAnC,EAAyC;AAEpD,MAAIC,eAAJ;;AAEA,MAAID,IAAI,KAAK,UAAb,EAAyB;AAErBC,IAAAA,eAAe,GAAG,MAAMC,eAAMC,GAAN,CAAUC,OAAO,CAACC,GAAR,CAAYC,iBAAtB,CAAxB;AAEH,GAJD,MAIO,IAAIN,IAAI,IAAI,OAAZ,EAAqB;AAExBC,IAAAA,eAAe,GAAG,MAAMC,eAAMC,GAAN,CAAUC,OAAO,CAACC,GAAR,CAAYE,uBAAtB,CAAxB;AAEH,GAJM,MAIA;AAEHN,IAAAA,eAAe,GAAG,MAAMC,eAAMC,GAAN,CAAUC,OAAO,CAACC,GAAR,CAAYC,iBAAtB,CAAxB;AAEH;;AAGD,MAAIE,WAAW,GAAG,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AAC/CC,iBAAIC,KAAJ,CAAUZ,eAAe,CAACa,IAA1B,EAAgC;AAAEC,MAAAA,OAAO,EAAE;AAAX,KAAhC,EAAmD,UAASC,GAAT,EAAcF,IAAd,EAAoB;AACnEJ,MAAAA,OAAO,CAACO,IAAI,CAACC,SAAL,CAAeJ,IAAf,EAAqB,IAArB,EAA2B,CAA3B,CAAD,CAAP;AACH,KAFD;AAGH,GAJiB,CAAlB;;AAMA,MAAIK,gBAAgB,GAAG,MAAMX,WAA7B;AAEA,SAAO,MAAMW,gBAAb;AAEH",
      "sourceRoot": "/var/www/corona/api",
      "sourcesContent": [
        "import axios from \"axios\"\nimport csv from \"csv\"\nconst dotenv = require('dotenv').config();\n\nexport default async function getGoogleSheetsJson(type) {\n\n    var googleSheetsCsv\n\n    if (type === \"infected\") {\n\n        googleSheetsCsv = await axios.get(process.env.GOOGLE_SHEETS_URL)\n\n    } else if (type == \"facts\") {\n\n        googleSheetsCsv = await axios.get(process.env.GOOGLE_SHEETS_URL_FACTS)\n\n    } else {\n\n        googleSheetsCsv = await axios.get(process.env.GOOGLE_SHEETS_URL)\n\n    }\n\n\n    var _converting = new Promise((resolve, reject) => {\n        csv.parse(googleSheetsCsv.data, { columns: true }, function(err, data) {\n            resolve(JSON.stringify(data, null, 2))\n        });\n    })\n\n    var googleSheetsJson = await _converting\n\n    return await googleSheetsJson\n\n}"
      ]
    },
    "sourceType": "script",
    "mtime": 1585082218197
  },
  "{\"sourceRoot\":\"/var/www/corona/api\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/var/www/corona/api\",\"filename\":\"/var/www/corona/api/auth.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/var/www/corona/api\",\"plugins\":[{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.8.7": {
    "metadata": {},
    "options": {
      "sourceRoot": "/var/www/corona/api",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/var/www/corona/api",
      "filename": "/var/www/corona/api/auth.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/var/www/corona/api",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-nullish-coalescing-operator",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "LogicalExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/var/www/corona/api/auth.js",
        "plugins": [
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/var/www/corona/api/auth.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/var/www/corona/api",
        "sourceFileName": "auth.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _default = async (req, res, next) => {\n  try {\n    if (_jsonwebtoken.default.verify(req.headers.authorization, process.env.JWT_KEY).secret === process.env.JWT_SECRET && (req.headers.origin === process.env.UI_URL || req.headers.origin === process.env.UI_URL_LV || req.headers.origin === process.env.UI_URL_WWW || req.headers.origin === process.env.UI_URL_LV_WWW)) {\n      next();\n    } else {\n      res.writeHead(301, {\n        Location: process.env.UI_URL\n      });\n      res.end();\n    }\n  } catch (err) {\n    res.writeHead(301, {\n      Location: process.env.UI_URL\n    });\n    res.end();\n  }\n};\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGguanMiXSwibmFtZXMiOlsicmVxIiwicmVzIiwibmV4dCIsImp3dCIsInZlcmlmeSIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwicHJvY2VzcyIsImVudiIsIkpXVF9LRVkiLCJzZWNyZXQiLCJKV1RfU0VDUkVUIiwib3JpZ2luIiwiVUlfVVJMIiwiVUlfVVJMX0xWIiwiVUlfVVJMX1dXVyIsIlVJX1VSTF9MVl9XV1ciLCJ3cml0ZUhlYWQiLCJMb2NhdGlvbiIsImVuZCIsImVyciJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7O2VBRWUsT0FBTUEsR0FBTixFQUFXQyxHQUFYLEVBQWdCQyxJQUFoQixLQUF5QjtBQUVwQyxNQUFJO0FBQ0EsUUFDSUMsc0JBQUlDLE1BQUosQ0FBV0osR0FBRyxDQUFDSyxPQUFKLENBQVlDLGFBQXZCLEVBQXNDQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsT0FBbEQsRUFBMkRDLE1BQTNELEtBQXNFSCxPQUFPLENBQUNDLEdBQVIsQ0FBWUcsVUFBbEYsS0FDQ1gsR0FBRyxDQUFDSyxPQUFKLENBQVlPLE1BQVosS0FBdUJMLE9BQU8sQ0FBQ0MsR0FBUixDQUFZSyxNQUFuQyxJQUE2Q2IsR0FBRyxDQUFDSyxPQUFKLENBQVlPLE1BQVosS0FBdUJMLE9BQU8sQ0FBQ0MsR0FBUixDQUFZTSxTQUFoRixJQUE2RmQsR0FBRyxDQUFDSyxPQUFKLENBQVlPLE1BQVosS0FBdUJMLE9BQU8sQ0FBQ0MsR0FBUixDQUFZTyxVQUFoSSxJQUE4SWYsR0FBRyxDQUFDSyxPQUFKLENBQVlPLE1BQVosS0FBdUJMLE9BQU8sQ0FBQ0MsR0FBUixDQUFZUSxhQURsTCxDQURKLEVBR0U7QUFDRWQsTUFBQUEsSUFBSTtBQUNQLEtBTEQsTUFLTztBQUNIRCxNQUFBQSxHQUFHLENBQUNnQixTQUFKLENBQWMsR0FBZCxFQUFtQjtBQUFFQyxRQUFBQSxRQUFRLEVBQUVYLE9BQU8sQ0FBQ0MsR0FBUixDQUFZSztBQUF4QixPQUFuQjtBQUNBWixNQUFBQSxHQUFHLENBQUNrQixHQUFKO0FBQ0g7QUFDSixHQVZELENBVUUsT0FBT0MsR0FBUCxFQUFZO0FBQ1ZuQixJQUFBQSxHQUFHLENBQUNnQixTQUFKLENBQWMsR0FBZCxFQUFtQjtBQUFFQyxNQUFBQSxRQUFRLEVBQUVYLE9BQU8sQ0FBQ0MsR0FBUixDQUFZSztBQUF4QixLQUFuQjtBQUNBWixJQUFBQSxHQUFHLENBQUNrQixHQUFKO0FBQ0g7QUFFSixDIiwic291cmNlUm9vdCI6Ii92YXIvd3d3L2Nvcm9uYS9hcGkiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG5cbiAgICB0cnkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICBqd3QudmVyaWZ5KHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24sIHByb2Nlc3MuZW52LkpXVF9LRVkpLnNlY3JldCA9PT0gcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCAmJlxuICAgICAgICAgICAgKHJlcS5oZWFkZXJzLm9yaWdpbiA9PT0gcHJvY2Vzcy5lbnYuVUlfVVJMIHx8IHJlcS5oZWFkZXJzLm9yaWdpbiA9PT0gcHJvY2Vzcy5lbnYuVUlfVVJMX0xWIHx8IHJlcS5oZWFkZXJzLm9yaWdpbiA9PT0gcHJvY2Vzcy5lbnYuVUlfVVJMX1dXVyB8fCByZXEuaGVhZGVycy5vcmlnaW4gPT09IHByb2Nlc3MuZW52LlVJX1VSTF9MVl9XV1cpXG4gICAgICAgICkge1xuICAgICAgICAgICAgbmV4dCgpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXMud3JpdGVIZWFkKDMwMSwgeyBMb2NhdGlvbjogcHJvY2Vzcy5lbnYuVUlfVVJMIH0pXG4gICAgICAgICAgICByZXMuZW5kKClcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICByZXMud3JpdGVIZWFkKDMwMSwgeyBMb2NhdGlvbjogcHJvY2Vzcy5lbnYuVUlfVVJMIH0pXG4gICAgICAgIHJlcy5lbmQoKVxuICAgIH1cblxufSJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "auth.js"
      ],
      "names": [
        "req",
        "res",
        "next",
        "jwt",
        "verify",
        "headers",
        "authorization",
        "process",
        "env",
        "JWT_KEY",
        "secret",
        "JWT_SECRET",
        "origin",
        "UI_URL",
        "UI_URL_LV",
        "UI_URL_WWW",
        "UI_URL_LV_WWW",
        "writeHead",
        "Location",
        "end",
        "err"
      ],
      "mappings": ";;;;;;;AAAA;;;;eAEe,OAAMA,GAAN,EAAWC,GAAX,EAAgBC,IAAhB,KAAyB;AAEpC,MAAI;AACA,QACIC,sBAAIC,MAAJ,CAAWJ,GAAG,CAACK,OAAJ,CAAYC,aAAvB,EAAsCC,OAAO,CAACC,GAAR,CAAYC,OAAlD,EAA2DC,MAA3D,KAAsEH,OAAO,CAACC,GAAR,CAAYG,UAAlF,KACCX,GAAG,CAACK,OAAJ,CAAYO,MAAZ,KAAuBL,OAAO,CAACC,GAAR,CAAYK,MAAnC,IAA6Cb,GAAG,CAACK,OAAJ,CAAYO,MAAZ,KAAuBL,OAAO,CAACC,GAAR,CAAYM,SAAhF,IAA6Fd,GAAG,CAACK,OAAJ,CAAYO,MAAZ,KAAuBL,OAAO,CAACC,GAAR,CAAYO,UAAhI,IAA8If,GAAG,CAACK,OAAJ,CAAYO,MAAZ,KAAuBL,OAAO,CAACC,GAAR,CAAYQ,aADlL,CADJ,EAGE;AACEd,MAAAA,IAAI;AACP,KALD,MAKO;AACHD,MAAAA,GAAG,CAACgB,SAAJ,CAAc,GAAd,EAAmB;AAAEC,QAAAA,QAAQ,EAAEX,OAAO,CAACC,GAAR,CAAYK;AAAxB,OAAnB;AACAZ,MAAAA,GAAG,CAACkB,GAAJ;AACH;AACJ,GAVD,CAUE,OAAOC,GAAP,EAAY;AACVnB,IAAAA,GAAG,CAACgB,SAAJ,CAAc,GAAd,EAAmB;AAAEC,MAAAA,QAAQ,EAAEX,OAAO,CAACC,GAAR,CAAYK;AAAxB,KAAnB;AACAZ,IAAAA,GAAG,CAACkB,GAAJ;AACH;AAEJ,C",
      "sourceRoot": "/var/www/corona/api",
      "sourcesContent": [
        "import jwt from 'jsonwebtoken';\n\nexport default async(req, res, next) => {\n\n    try {\n        if (\n            jwt.verify(req.headers.authorization, process.env.JWT_KEY).secret === process.env.JWT_SECRET &&\n            (req.headers.origin === process.env.UI_URL || req.headers.origin === process.env.UI_URL_LV || req.headers.origin === process.env.UI_URL_WWW || req.headers.origin === process.env.UI_URL_LV_WWW)\n        ) {\n            next()\n        } else {\n            res.writeHead(301, { Location: process.env.UI_URL })\n            res.end()\n        }\n    } catch (err) {\n        res.writeHead(301, { Location: process.env.UI_URL })\n        res.end()\n    }\n\n}"
      ]
    },
    "sourceType": "script",
    "mtime": 1585135849481
  },
  "{\"sourceRoot\":\"/var/www/corona/api\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/var/www/corona/api\",\"filename\":\"/var/www/corona/api/auth.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/var/www/corona/api\",\"plugins\":[{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.8.7": {
    "metadata": {},
    "options": {
      "sourceRoot": "/var/www/corona/api",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/var/www/corona/api",
      "filename": "/var/www/corona/api/auth.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/var/www/corona/api",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-nullish-coalescing-operator",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "LogicalExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/var/www/corona/api/auth.js",
        "plugins": [
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/var/www/corona/api/auth.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/var/www/corona/api",
        "sourceFileName": "auth.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _default = async (req, res, next) => {\n  try {\n    if (_jsonwebtoken.default.verify(req.headers.authorization, process.env.JWT_KEY).secret === process.env.JWT_SECRET && (req.headers.origin === process.env.UI_URL || req.headers.origin === process.env.UI_URL_LV || req.headers.origin === process.env.UI_URL_WWW || req.headers.origin === process.env.UI_URL_LV_WWW)) {\n      next();\n    } else {\n      res.writeHead(301, {\n        Location: process.env.UI_URL\n      });\n      res.end();\n    }\n  } catch (err) {\n    res.writeHead(301, {\n      Location: process.env.UI_URL\n    });\n    res.end();\n  }\n};\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGguanMiXSwibmFtZXMiOlsicmVxIiwicmVzIiwibmV4dCIsImp3dCIsInZlcmlmeSIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwicHJvY2VzcyIsImVudiIsIkpXVF9LRVkiLCJzZWNyZXQiLCJKV1RfU0VDUkVUIiwib3JpZ2luIiwiVUlfVVJMIiwiVUlfVVJMX0xWIiwiVUlfVVJMX1dXVyIsIlVJX1VSTF9MVl9XV1ciLCJ3cml0ZUhlYWQiLCJMb2NhdGlvbiIsImVuZCIsImVyciJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7O2VBRWUsT0FBTUEsR0FBTixFQUFXQyxHQUFYLEVBQWdCQyxJQUFoQixLQUF5QjtBQUVwQyxNQUFJO0FBQ0EsUUFDSUMsc0JBQUlDLE1BQUosQ0FBV0osR0FBRyxDQUFDSyxPQUFKLENBQVlDLGFBQXZCLEVBQXNDQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsT0FBbEQsRUFBMkRDLE1BQTNELEtBQXNFSCxPQUFPLENBQUNDLEdBQVIsQ0FBWUcsVUFBbEYsS0FDQ1gsR0FBRyxDQUFDSyxPQUFKLENBQVlPLE1BQVosS0FBdUJMLE9BQU8sQ0FBQ0MsR0FBUixDQUFZSyxNQUFuQyxJQUE2Q2IsR0FBRyxDQUFDSyxPQUFKLENBQVlPLE1BQVosS0FBdUJMLE9BQU8sQ0FBQ0MsR0FBUixDQUFZTSxTQUFoRixJQUE2RmQsR0FBRyxDQUFDSyxPQUFKLENBQVlPLE1BQVosS0FBdUJMLE9BQU8sQ0FBQ0MsR0FBUixDQUFZTyxVQUFoSSxJQUE4SWYsR0FBRyxDQUFDSyxPQUFKLENBQVlPLE1BQVosS0FBdUJMLE9BQU8sQ0FBQ0MsR0FBUixDQUFZUSxhQURsTCxDQURKLEVBR0U7QUFDRWQsTUFBQUEsSUFBSTtBQUNQLEtBTEQsTUFLTztBQUNIRCxNQUFBQSxHQUFHLENBQUNnQixTQUFKLENBQWMsR0FBZCxFQUFtQjtBQUFFQyxRQUFBQSxRQUFRLEVBQUVYLE9BQU8sQ0FBQ0MsR0FBUixDQUFZSztBQUF4QixPQUFuQjtBQUNBWixNQUFBQSxHQUFHLENBQUNrQixHQUFKO0FBQ0g7QUFDSixHQVZELENBVUUsT0FBT0MsR0FBUCxFQUFZO0FBQ1ZuQixJQUFBQSxHQUFHLENBQUNnQixTQUFKLENBQWMsR0FBZCxFQUFtQjtBQUFFQyxNQUFBQSxRQUFRLEVBQUVYLE9BQU8sQ0FBQ0MsR0FBUixDQUFZSztBQUF4QixLQUFuQjtBQUNBWixJQUFBQSxHQUFHLENBQUNrQixHQUFKO0FBQ0g7QUFFSixDIiwic291cmNlUm9vdCI6Ii92YXIvd3d3L2Nvcm9uYS9hcGkiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG5cbiAgICB0cnkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICBqd3QudmVyaWZ5KHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24sIHByb2Nlc3MuZW52LkpXVF9LRVkpLnNlY3JldCA9PT0gcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCAmJlxuICAgICAgICAgICAgKHJlcS5oZWFkZXJzLm9yaWdpbiA9PT0gcHJvY2Vzcy5lbnYuVUlfVVJMIHx8IHJlcS5oZWFkZXJzLm9yaWdpbiA9PT0gcHJvY2Vzcy5lbnYuVUlfVVJMX0xWIHx8IHJlcS5oZWFkZXJzLm9yaWdpbiA9PT0gcHJvY2Vzcy5lbnYuVUlfVVJMX1dXVyB8fCByZXEuaGVhZGVycy5vcmlnaW4gPT09IHByb2Nlc3MuZW52LlVJX1VSTF9MVl9XV1cpXG4gICAgICAgICkge1xuICAgICAgICAgICAgbmV4dCgpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXMud3JpdGVIZWFkKDMwMSwgeyBMb2NhdGlvbjogcHJvY2Vzcy5lbnYuVUlfVVJMIH0pXG4gICAgICAgICAgICByZXMuZW5kKClcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICByZXMud3JpdGVIZWFkKDMwMSwgeyBMb2NhdGlvbjogcHJvY2Vzcy5lbnYuVUlfVVJMIH0pXG4gICAgICAgIHJlcy5lbmQoKVxuICAgIH1cblxufSJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "auth.js"
      ],
      "names": [
        "req",
        "res",
        "next",
        "jwt",
        "verify",
        "headers",
        "authorization",
        "process",
        "env",
        "JWT_KEY",
        "secret",
        "JWT_SECRET",
        "origin",
        "UI_URL",
        "UI_URL_LV",
        "UI_URL_WWW",
        "UI_URL_LV_WWW",
        "writeHead",
        "Location",
        "end",
        "err"
      ],
      "mappings": ";;;;;;;AAAA;;;;eAEe,OAAMA,GAAN,EAAWC,GAAX,EAAgBC,IAAhB,KAAyB;AAEpC,MAAI;AACA,QACIC,sBAAIC,MAAJ,CAAWJ,GAAG,CAACK,OAAJ,CAAYC,aAAvB,EAAsCC,OAAO,CAACC,GAAR,CAAYC,OAAlD,EAA2DC,MAA3D,KAAsEH,OAAO,CAACC,GAAR,CAAYG,UAAlF,KACCX,GAAG,CAACK,OAAJ,CAAYO,MAAZ,KAAuBL,OAAO,CAACC,GAAR,CAAYK,MAAnC,IAA6Cb,GAAG,CAACK,OAAJ,CAAYO,MAAZ,KAAuBL,OAAO,CAACC,GAAR,CAAYM,SAAhF,IAA6Fd,GAAG,CAACK,OAAJ,CAAYO,MAAZ,KAAuBL,OAAO,CAACC,GAAR,CAAYO,UAAhI,IAA8If,GAAG,CAACK,OAAJ,CAAYO,MAAZ,KAAuBL,OAAO,CAACC,GAAR,CAAYQ,aADlL,CADJ,EAGE;AACEd,MAAAA,IAAI;AACP,KALD,MAKO;AACHD,MAAAA,GAAG,CAACgB,SAAJ,CAAc,GAAd,EAAmB;AAAEC,QAAAA,QAAQ,EAAEX,OAAO,CAACC,GAAR,CAAYK;AAAxB,OAAnB;AACAZ,MAAAA,GAAG,CAACkB,GAAJ;AACH;AACJ,GAVD,CAUE,OAAOC,GAAP,EAAY;AACVnB,IAAAA,GAAG,CAACgB,SAAJ,CAAc,GAAd,EAAmB;AAAEC,MAAAA,QAAQ,EAAEX,OAAO,CAACC,GAAR,CAAYK;AAAxB,KAAnB;AACAZ,IAAAA,GAAG,CAACkB,GAAJ;AACH;AAEJ,C",
      "sourceRoot": "/var/www/corona/api",
      "sourcesContent": [
        "import jwt from 'jsonwebtoken';\n\nexport default async(req, res, next) => {\n\n    try {\n        if (\n            jwt.verify(req.headers.authorization, process.env.JWT_KEY).secret === process.env.JWT_SECRET &&\n            (req.headers.origin === process.env.UI_URL || req.headers.origin === process.env.UI_URL_LV || req.headers.origin === process.env.UI_URL_WWW || req.headers.origin === process.env.UI_URL_LV_WWW)\n        ) {\n            next()\n        } else {\n            res.writeHead(301, { Location: process.env.UI_URL })\n            res.end()\n        }\n    } catch (err) {\n        res.writeHead(301, { Location: process.env.UI_URL })\n        res.end()\n    }\n\n}"
      ]
    },
    "sourceType": "script",
    "mtime": 1585135849481
  }
}